{"version":3,"file":"js/main-416f9064.6da4b07d860e70ce5fcd.js","mappings":"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","sources":["webpack://loan-calculator/./src/js/services/storage.service.js","webpack://loan-calculator/./src/js/utils/loading-manager.js","webpack://loan-calculator/./src/js/utils/formatters.js","webpack://loan-calculator/./src/js/utils/translations.js","webpack://loan-calculator/./src/js/utils/tooltips.js","webpack://loan-calculator/./src/js/utils/animation-manager.js","webpack://loan-calculator/./src/js/utils/accessibility.js","webpack://loan-calculator/./src/js/services/calculation-manager.service.js","webpack://loan-calculator/./src/js/services/language.service.js","webpack://loan-calculator/./src/js/utils/validators.js"],"sourcesContent":["/**\n * Storage Service\n * Manages saving and retrieving loan calculations\n * Implements requirements 3.1, 3.2, 3.6\n */\n\nimport Loan from '../models/loan.model';\nimport { AmortizationSchedule } from '../models/amortization.model';\n\nclass StorageService {\n  /**\n   * Create a new storage service\n   * @param {Object} options - Configuration options\n   * @param {string} [options.storageKey] - Key used for localStorage\n   * @param {string} [options.version] - Data version for compatibility\n   */\n  constructor(options = {}) {\n    this.storageKey = options.storageKey || 'loan-calculator-data';\n    this.version = options.version || '1.0';\n\n    // Initialize storage if needed\n    this._initializeStorage();\n  }\n\n  /**\n   * Initialize the storage with default structure if it doesn't exist\n   * @private\n   */\n  _initializeStorage() {\n    try {\n      // Check if storage exists\n      const data = localStorage.getItem(this.storageKey);\n\n      // If not, create default structure\n      if (!data) {\n        const defaultData = {\n          version: this.version,\n          lastUpdated: new Date().toISOString(),\n          calculations: [],\n        };\n\n        localStorage.setItem(this.storageKey, JSON.stringify(defaultData));\n      } else {\n        // If it exists but has an old version, migrate it\n        const parsedData = JSON.parse(data);\n        if (parsedData.version !== this.version) {\n          this._migrateData(parsedData);\n        }\n      }\n    } catch (error) {\n      console.error('Error initializing storage:', error);\n    }\n  }\n\n  /**\n   * Migrate data from an older version to the current version\n   * @param {Object} oldData - Data in the old format\n   * @private\n   */\n  _migrateData(oldData) {\n    // This is where version-specific migrations would happen\n    // For now, we'll just update the version and save it back\n\n    const migratedData = {\n      ...oldData,\n      version: this.version,\n      lastUpdated: new Date().toISOString(),\n    };\n\n    // Ensure calculations array exists\n    if (!migratedData.calculations) {\n      migratedData.calculations = [];\n    }\n\n    try {\n      localStorage.setItem(this.storageKey, JSON.stringify(migratedData));\n      console.log(`Storage data migrated to version ${this.version}`);\n    } catch (error) {\n      console.error('Error migrating storage data:', error);\n    }\n  }\n\n  /**\n   * Get all stored data\n   * @returns {Object} The full storage data object\n   * @private\n   */\n  _getData() {\n    try {\n      const data = localStorage.getItem(this.storageKey);\n      return data ? JSON.parse(data) : null;\n    } catch (error) {\n      console.error('Error reading from storage:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Save data to storage\n   * @param {Object} data - Data to save\n   * @returns {boolean} Success status\n   * @private\n   */\n  _saveData(data) {\n    try {\n      // Update the last updated timestamp\n      data.lastUpdated = new Date().toISOString();\n\n      // Save to localStorage\n      localStorage.setItem(this.storageKey, JSON.stringify(data));\n      return true;\n    } catch (error) {\n      // Handle storage errors (e.g., quota exceeded)\n      console.error('Error saving to storage:', error);\n\n      // If it's a quota error, try to free up space\n      if (error.name === 'QuotaExceededError'\n          || error.name === 'NS_ERROR_DOM_QUOTA_REACHED'\n          || error.code === 22) {\n        this._handleStorageLimit();\n      }\n\n      return false;\n    }\n  }\n\n  /**\n   * Handle storage limit errors by removing oldest calculations\n   * @private\n   */\n  _handleStorageLimit() {\n    try {\n      const data = this._getData();\n\n      if (data && data.calculations && data.calculations.length > 0) {\n        // Sort calculations by date (oldest first)\n        data.calculations.sort((a, b) => new Date(a.updatedAt) - new Date(b.updatedAt));\n\n        // Remove the oldest calculation\n        data.calculations.shift();\n\n        // Try to save again\n        this._saveData(data);\n\n        console.warn('Storage limit reached. Removed oldest calculation to free space.');\n      }\n    } catch (error) {\n      console.error('Error handling storage limit:', error);\n    }\n  }\n\n  /**\n   * Save a loan calculation to storage\n   * @param {Loan} loan - Loan object to save\n   * @param {AmortizationSchedule} [amortizationSchedule] - Optional amortization schedule\n   * @returns {string} ID of the saved calculation or empty string if failed\n   */\n  saveCalculation(loan, amortizationSchedule = null) {\n    try {\n      if (!loan) {\n        throw new Error('No loan data provided');\n      }\n\n      // Get current data\n      const data = this._getData();\n      if (!data) {\n        throw new Error('Could not access storage');\n      }\n\n      // Prepare calculation object\n      const calculationData = {\n        loan: loan.toJSON(),\n        amortizationSchedule: amortizationSchedule ? amortizationSchedule.toJSON() : null,\n        savedAt: new Date().toISOString(),\n      };\n\n      // Check if this is an update or a new calculation\n      const existingIndex = data.calculations.findIndex((calc) => calc.loan.id === loan.id);\n\n      if (existingIndex >= 0) {\n        // Update existing calculation\n        data.calculations[existingIndex] = calculationData;\n      } else {\n        // Add new calculation\n        data.calculations.push(calculationData);\n      }\n\n      // Save back to storage\n      if (this._saveData(data)) {\n        return loan.id;\n      }\n      throw new Error('Failed to save calculation');\n    } catch (error) {\n      console.error('Error saving calculation:', error);\n      return '';\n    }\n  }\n\n  /**\n   * Get all saved calculations\n   * @returns {Array} Array of loan objects\n   */\n  getCalculations() {\n    try {\n      const data = this._getData();\n\n      if (!data || !data.calculations) {\n        return [];\n      }\n\n      // Convert stored JSON back to Loan objects\n      return data.calculations.map((calc) => {\n        const loan = Loan.fromJSON(calc.loan);\n        return {\n          loan,\n          savedAt: new Date(calc.savedAt),\n        };\n      });\n    } catch (error) {\n      console.error('Error retrieving calculations:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Get a specific calculation by ID\n   * @param {string} id - ID of the calculation to retrieve\n   * @returns {Object|null} Object with loan and amortizationSchedule properties, or null if not found\n   */\n  getCalculationById(id) {\n    try {\n      if (!id) {\n        throw new Error('No ID provided');\n      }\n\n      const data = this._getData();\n\n      if (!data || !data.calculations) {\n        return null;\n      }\n\n      // Find the calculation with the matching ID\n      const calculationData = data.calculations.find((calc) => calc.loan.id === id);\n\n      if (!calculationData) {\n        return null;\n      }\n\n      // Convert stored JSON back to objects\n      const loan = Loan.fromJSON(calculationData.loan);\n      let amortizationSchedule = null;\n\n      if (calculationData.amortizationSchedule) {\n        amortizationSchedule = AmortizationSchedule.fromJSON(\n          calculationData.amortizationSchedule,\n          loan,\n        );\n      }\n\n      return {\n        loan,\n        amortizationSchedule,\n        savedAt: new Date(calculationData.savedAt),\n      };\n    } catch (error) {\n      console.error('Error retrieving calculation by ID:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Update an existing calculation\n   * @param {string} id - ID of the calculation to update\n   * @param {Loan} updatedLoan - Updated loan object\n   * @param {AmortizationSchedule} [updatedSchedule] - Updated amortization schedule\n   * @returns {boolean} Success status\n   */\n  updateCalculation(id, updatedLoan, updatedSchedule = null) {\n    try {\n      if (!id || !updatedLoan) {\n        throw new Error('ID and updated loan data are required');\n      }\n\n      // Ensure the ID matches\n      if (updatedLoan.id !== id) {\n        updatedLoan.id = id;\n      }\n\n      // Use the save method to update\n      const result = this.saveCalculation(updatedLoan, updatedSchedule);\n      return result === id;\n    } catch (error) {\n      console.error('Error updating calculation:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Delete a calculation by ID\n   * @param {string} id - ID of the calculation to delete\n   * @returns {boolean} Success status\n   */\n  deleteCalculation(id) {\n    try {\n      if (!id) {\n        throw new Error('No ID provided');\n      }\n\n      const data = this._getData();\n\n      if (!data || !data.calculations) {\n        return false;\n      }\n\n      // Find the index of the calculation with the matching ID\n      const index = data.calculations.findIndex((calc) => calc.loan.id === id);\n\n      if (index === -1) {\n        return false;\n      }\n\n      // Remove the calculation\n      data.calculations.splice(index, 1);\n\n      // Save back to storage\n      return this._saveData(data);\n    } catch (error) {\n      console.error('Error deleting calculation:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Clear all saved calculations\n   * @returns {boolean} Success status\n   */\n  clearAllCalculations() {\n    try {\n      const data = this._getData();\n\n      if (!data) {\n        return false;\n      }\n\n      // Clear the calculations array\n      data.calculations = [];\n\n      // Save back to storage\n      return this._saveData(data);\n    } catch (error) {\n      console.error('Error clearing calculations:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Check if local storage is available\n   * @returns {boolean} Whether storage is available\n   */\n  isStorageAvailable() {\n    try {\n      const testKey = '__storage_test__';\n      localStorage.setItem(testKey, testKey);\n      const result = localStorage.getItem(testKey) === testKey;\n      localStorage.removeItem(testKey);\n      return result;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * Get storage usage statistics\n   * @returns {Object} Storage statistics including used space, available space, and item count\n   */\n  getStorageStats() {\n    try {\n      // Get all data\n      const allData = this._getData();\n      const serializedData = JSON.stringify(allData);\n\n      // Calculate size in bytes\n      const usedBytes = new Blob([serializedData]).size;\n\n      // Estimate total available space (5MB is typical for most browsers)\n      const totalBytes = 5 * 1024 * 1024;\n\n      return {\n        usedBytes,\n        usedKB: Math.round(usedBytes / 1024),\n        totalBytes,\n        totalKB: Math.round(totalBytes / 1024),\n        percentUsed: Math.round((usedBytes / totalBytes) * 100),\n        itemCount: allData && allData.calculations ? allData.calculations.length : 0,\n        isNearingLimit: usedBytes > (totalBytes * 0.8), // Warning at 80% usage\n      };\n    } catch (error) {\n      console.error('Error calculating storage stats:', error);\n      return {\n        usedBytes: 0,\n        usedKB: 0,\n        totalBytes: 0,\n        totalKB: 0,\n        percentUsed: 0,\n        itemCount: 0,\n        isNearingLimit: false,\n      };\n    }\n  }\n}\n\nexport default StorageService;\n","/**\n * Loading Manager Utility\n * Manages various loading states and animations\n * Implements requirements 3.2, 3.4\n */\n\nclass LoadingManager {\n  constructor() {\n    this.activeLoadings = new Map();\n    this.loadingOverlay = null;\n  }\n\n  /**\n   * Show skeleton loader for a specific container\n   * @param {HTMLElement|string} container - Container element or selector\n   * @param {string} type - Type of skeleton ('results', 'table', 'chart', 'form')\n   * @param {Object} options - Additional options\n   */\n  showSkeleton(container, type = 'results', options = {}) {\n    const element = typeof container === 'string' ? document.querySelector(container) : container;\n    if (!element) return;\n\n    const skeletonId = `skeleton-${Date.now()}`;\n    const skeletonHtml = this.generateSkeletonHtml(type, options);\n\n    // Store original content\n    this.activeLoadings.set(skeletonId, {\n      element,\n      originalContent: element.innerHTML,\n      type: 'skeleton',\n    });\n\n    // Show skeleton\n    element.innerHTML = skeletonHtml;\n    element.classList.add('skeleton-loading');\n\n    return skeletonId;\n  }\n\n  /**\n   * Hide skeleton loader\n   * @param {string} skeletonId - Skeleton ID returned from showSkeleton\n   * @param {boolean} restoreContent - Whether to restore original content\n   */\n  hideSkeleton(skeletonId, restoreContent = false) {\n    const loading = this.activeLoadings.get(skeletonId);\n    if (!loading) return;\n\n    if (restoreContent) {\n      loading.element.innerHTML = loading.originalContent;\n    }\n\n    loading.element.classList.remove('skeleton-loading');\n    this.activeLoadings.delete(skeletonId);\n  }\n\n  /**\n   * Show progress overlay with steps\n   * @param {Array} steps - Array of step objects {id, label, status}\n   * @param {Object} options - Additional options\n   */\n  showProgressOverlay(steps = [], options = {}) {\n    const {\n      title = 'Processing...',\n      message = 'Please wait while we process your request.',\n      cancellable = false,\n      onCancel = null,\n    } = options;\n\n    // Remove existing overlay\n    this.hideProgressOverlay();\n\n    // Create overlay\n    this.loadingOverlay = document.createElement('div');\n    this.loadingOverlay.className = 'calculation-loading-overlay';\n    this.loadingOverlay.innerHTML = `\n      <div class=\"loading-content\">\n        <div class=\"loading-header\">\n          <h3>${title}</h3>\n          <p class=\"loading-message\">${message}</p>\n        </div>\n        \n        ${steps.length > 0 ? this.generateProgressSteps(steps) : ''}\n        \n        <div class=\"loading-spinner-container\">\n          <div class=\"loading-spinner-dots\">\n            <div class=\"loading-dot\"></div>\n            <div class=\"loading-dot\"></div>\n            <div class=\"loading-dot\"></div>\n          </div>\n        </div>\n        \n        <div class=\"loading-progress\">\n          <div class=\"progress-bar-enhanced\">\n            <div class=\"progress-fill-enhanced pulsing\" style=\"width: 0%\"></div>\n          </div>\n          <div class=\"progress-text\">Initializing...</div>\n        </div>\n        \n        ${cancellable ? `\n          <div class=\"loading-actions\">\n            <button class=\"btn-cancel\" id=\"cancel-loading\">Cancel</button>\n          </div>\n        ` : ''}\n      </div>\n    `;\n\n    // Add to document\n    document.body.appendChild(this.loadingOverlay);\n\n    // Handle cancel button\n    if (cancellable && onCancel) {\n      const cancelBtn = this.loadingOverlay.querySelector('#cancel-loading');\n      if (cancelBtn) {\n        cancelBtn.addEventListener('click', () => {\n          onCancel();\n          this.hideProgressOverlay();\n        });\n      }\n    }\n\n    // Animate in\n    requestAnimationFrame(() => {\n      this.loadingOverlay.style.opacity = '1';\n    });\n  }\n\n  /**\n   * Update progress overlay\n   * @param {number} progress - Progress percentage (0-100)\n   * @param {string} message - Progress message\n   * @param {string} currentStep - Current step ID\n   */\n  updateProgress(progress, message = '', currentStep = null) {\n    if (!this.loadingOverlay) return;\n\n    const progressFill = this.loadingOverlay.querySelector('.progress-fill-enhanced');\n    const progressText = this.loadingOverlay.querySelector('.progress-text');\n\n    if (progressFill) {\n      progressFill.style.width = `${Math.min(100, Math.max(0, progress))}%`;\n    }\n\n    if (progressText && message) {\n      progressText.textContent = message;\n    }\n\n    // Update step status\n    if (currentStep) {\n      this.updateStepStatus(currentStep, 'active');\n    }\n  }\n\n  /**\n   * Update step status in progress overlay\n   * @param {string} stepId - Step ID\n   * @param {string} status - Status ('pending', 'active', 'completed', 'error')\n   */\n  updateStepStatus(stepId, status) {\n    if (!this.loadingOverlay) return;\n\n    const step = this.loadingOverlay.querySelector(`[data-step-id=\"${stepId}\"]`);\n    if (!step) return;\n\n    // Remove all status classes\n    step.classList.remove('pending', 'active', 'completed', 'error');\n    step.classList.add(status);\n\n    // Update step number/icon\n    const circle = step.querySelector('.progress-step-circle');\n    if (circle) {\n      switch (status) {\n        case 'completed':\n          circle.innerHTML = '✓';\n          break;\n        case 'error':\n          circle.innerHTML = '✗';\n          break;\n        case 'active':\n          circle.innerHTML = step.dataset.stepNumber || '';\n          break;\n        default:\n          circle.innerHTML = step.dataset.stepNumber || '';\n      }\n    }\n  }\n\n  /**\n   * Hide progress overlay\n   */\n  hideProgressOverlay() {\n    if (this.loadingOverlay) {\n      this.loadingOverlay.style.opacity = '0';\n      setTimeout(() => {\n        if (this.loadingOverlay && this.loadingOverlay.parentNode) {\n          this.loadingOverlay.parentNode.removeChild(this.loadingOverlay);\n        }\n        this.loadingOverlay = null;\n      }, 300);\n    }\n  }\n\n  /**\n   * Show inline loading spinner\n   * @param {HTMLElement|string} container - Container element or selector\n   * @param {string} type - Spinner type ('default', 'dots', 'pulse', 'bars')\n   * @param {string} message - Loading message\n   */\n  showInlineLoader(container, type = 'default', message = 'Loading...') {\n    const element = typeof container === 'string' ? document.querySelector(container) : container;\n    if (!element) return;\n\n    const loaderId = `loader-${Date.now()}`;\n    const spinnerHtml = this.generateSpinnerHtml(type, message);\n\n    // Store original content\n    this.activeLoadings.set(loaderId, {\n      element,\n      originalContent: element.innerHTML,\n      type: 'inline',\n    });\n\n    // Show loader\n    element.innerHTML = spinnerHtml;\n    element.classList.add('inline-loading');\n\n    return loaderId;\n  }\n\n  /**\n   * Hide inline loading spinner\n   * @param {string} loaderId - Loader ID returned from showInlineLoader\n   * @param {boolean} restoreContent - Whether to restore original content\n   */\n  hideInlineLoader(loaderId, restoreContent = false) {\n    const loading = this.activeLoadings.get(loaderId);\n    if (!loading) return;\n\n    if (restoreContent) {\n      loading.element.innerHTML = loading.originalContent;\n    }\n\n    loading.element.classList.remove('inline-loading');\n    this.activeLoadings.delete(loaderId);\n  }\n\n  /**\n   * Generate skeleton HTML based on type\n   * @param {string} type - Skeleton type\n   * @param {Object} options - Additional options\n   * @returns {string} Skeleton HTML\n   */\n  generateSkeletonHtml(type, options = {}) {\n    switch (type) {\n      case 'results':\n        return this.generateResultsSkeleton(options);\n      case 'table':\n        return this.generateTableSkeleton(options);\n      case 'chart':\n        return this.generateChartSkeleton(options);\n      case 'form':\n        return this.generateFormSkeleton(options);\n      default:\n        return this.generateResultsSkeleton(options);\n    }\n  }\n\n  /**\n   * Generate results skeleton HTML\n   * @param {Object} options - Options\n   * @returns {string} HTML\n   */\n  generateResultsSkeleton(options = {}) {\n    const { items = 8 } = options;\n\n    return `\n      <div class=\"skeleton-results\">\n        <div class=\"skeleton-summary\">\n          ${Array(items).fill(0).map(() => `\n            <div class=\"skeleton-summary-item\">\n              <div class=\"skeleton-summary-label skeleton\"></div>\n              <div class=\"skeleton-summary-value skeleton\"></div>\n            </div>\n          `).join('')}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Generate table skeleton HTML\n   * @param {Object} options - Options\n   * @returns {string} HTML\n   */\n  generateTableSkeleton(options = {}) {\n    const { rows = 10, columns = 5 } = options;\n\n    return `\n      <table class=\"skeleton-table\">\n        <thead>\n          <tr>\n            ${Array(columns).fill(0).map(() => `\n              <th><div class=\"skeleton-table-header skeleton\"></div></th>\n            `).join('')}\n          </tr>\n        </thead>\n        <tbody>\n          ${Array(rows).fill(0).map(() => `\n            <tr class=\"skeleton-row\">\n              ${Array(columns).fill(0).map((_, i) => `\n                <td><div class=\"skeleton-cell ${i === columns - 1 ? 'number' : i % 3 === 0 ? 'short' : 'medium'} skeleton\"></div></td>\n              `).join('')}\n            </tr>\n          `).join('')}\n        </tbody>\n      </table>\n    `;\n  }\n\n  /**\n   * Generate chart skeleton HTML\n   * @param {Object} options - Options\n   * @returns {string} HTML\n   */\n  generateChartSkeleton(options = {}) {\n    const { title = true, legend = true } = options;\n\n    return `\n      <div class=\"skeleton-chart\">\n        ${title ? '<div class=\"skeleton-chart-title skeleton\"></div>' : ''}\n        ${legend ? `\n          <div class=\"skeleton-chart-legend\">\n            <div class=\"skeleton-legend-item\">\n              <div class=\"skeleton-legend-color skeleton\"></div>\n              <div class=\"skeleton-legend-text skeleton\"></div>\n            </div>\n            <div class=\"skeleton-legend-item\">\n              <div class=\"skeleton-legend-color skeleton\"></div>\n              <div class=\"skeleton-legend-text skeleton\"></div>\n            </div>\n          </div>\n        ` : ''}\n      </div>\n    `;\n  }\n\n  /**\n   * Generate form skeleton HTML\n   * @param {Object} options - Options\n   * @returns {string} HTML\n   */\n  generateFormSkeleton(options = {}) {\n    const { fields = 6 } = options;\n\n    return `\n      <div class=\"skeleton-form\">\n        ${Array(fields).fill(0).map(() => `\n          <div class=\"skeleton-form-group\">\n            <div class=\"skeleton-form-label skeleton\"></div>\n            <div class=\"skeleton-form-input skeleton\"></div>\n            <div class=\"skeleton-form-slider skeleton\"></div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  /**\n   * Generate spinner HTML\n   * @param {string} type - Spinner type\n   * @param {string} message - Loading message\n   * @returns {string} HTML\n   */\n  generateSpinnerHtml(type, message) {\n    let spinnerHtml = '';\n\n    switch (type) {\n      case 'dots':\n        spinnerHtml = `\n          <div class=\"loading-spinner-dots\">\n            <div class=\"loading-dot\"></div>\n            <div class=\"loading-dot\"></div>\n            <div class=\"loading-dot\"></div>\n          </div>\n        `;\n        break;\n      case 'pulse':\n        spinnerHtml = '<div class=\"loading-spinner-pulse\"></div>';\n        break;\n      case 'bars':\n        spinnerHtml = `\n          <div class=\"loading-spinner-bars\">\n            <div class=\"loading-bar\"></div>\n            <div class=\"loading-bar\"></div>\n            <div class=\"loading-bar\"></div>\n            <div class=\"loading-bar\"></div>\n            <div class=\"loading-bar\"></div>\n          </div>\n        `;\n        break;\n      default:\n        spinnerHtml = '<div class=\"loading-spinner\"></div>';\n    }\n\n    return `\n      <div class=\"component-loading\">\n        ${spinnerHtml}\n        <div class=\"loading-text\">${message}</div>\n      </div>\n    `;\n  }\n\n  /**\n   * Generate progress steps HTML\n   * @param {Array} steps - Array of step objects\n   * @returns {string} HTML\n   */\n  generateProgressSteps(steps) {\n    return `\n      <div class=\"progress-steps\">\n        ${steps.map((step, index) => `\n          <div class=\"progress-step ${step.status || 'pending'}\" data-step-id=\"${step.id}\" data-step-number=\"${index + 1}\">\n            <div class=\"progress-step-circle\">${step.status === 'completed' ? '✓' : step.status === 'error' ? '✗' : index + 1}</div>\n            <div class=\"progress-step-line\"></div>\n            <div class=\"progress-step-label\">${step.label}</div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  /**\n   * Clear all active loadings\n   */\n  clearAll() {\n    // Hide progress overlay\n    this.hideProgressOverlay();\n\n    // Clear all active loadings\n    this.activeLoadings.forEach((loading, id) => {\n      if (loading.type === 'skeleton') {\n        this.hideSkeleton(id, true);\n      } else if (loading.type === 'inline') {\n        this.hideInlineLoader(id, true);\n      }\n    });\n\n    this.activeLoadings.clear();\n  }\n}\n\n// Create singleton instance\nconst loadingManager = new LoadingManager();\n\nexport default loadingManager;\n","/**\n * Formatters Utility\n * Provides formatting functions for numbers, currencies, dates, etc.\n * Enhanced with internationalization support\n */\n\n/**\n * Get locale string based on language code\n * @param {string} language - Language code (e.g., 'en', 'es')\n * @returns {string} Locale string (e.g., 'en-US', 'es-ES')\n */\nexport function getLocaleFromLanguage(language) {\n  const localeMap = {\n    en: 'en-US',\n    es: 'es-ES',\n  };\n  return localeMap[language] || 'en-US';\n}\n\n/**\n * Get date format based on locale\n * @param {string} locale - Locale string (e.g., 'en-US', 'es-ES')\n * @returns {string} Date format string\n */\nexport function getDateFormatForLocale(locale) {\n  const formatMap = {\n    'en-US': 'MM/DD/YYYY',\n    'es-ES': 'DD/MM/YYYY',\n  };\n  return formatMap[locale] || 'MM/DD/YYYY';\n}\n\n/**\n * Format a number with specified decimal places and locale\n * @param {number} value - The number to format\n * @param {number} decimals - Number of decimal places\n * @param {string} locale - Locale for formatting (e.g., 'en-US', 'es-ES')\n * @returns {string} Formatted number\n */\nexport function formatNumber(value, decimals = 2, locale = 'en-US') {\n  return new Intl.NumberFormat(locale, {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n  }).format(value);\n}\n\n/**\n * Format a value as currency\n * @param {number} value - The value to format\n * @param {string} currencyCode - Currency code (e.g., 'USD', 'EUR')\n * @param {string} locale - Locale for formatting (e.g., 'en-US', 'es-ES')\n * @returns {string} Formatted currency\n */\nexport function formatCurrency(value, currencyCode = 'USD', locale = 'en-US') {\n  return new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency: currencyCode,\n  }).format(value);\n}\n\n/**\n * Format a date\n * @param {Date|string} date - The date to format\n * @param {string} format - Format string (e.g., 'MM/DD/YYYY')\n * @param {string} locale - Locale for formatting (e.g., 'en-US', 'es-ES')\n * @returns {string} Formatted date\n */\nexport function formatDate(date, format = null, locale = 'en-US') {\n  const dateObj = date instanceof Date ? date : new Date(date);\n\n  // Use Intl.DateTimeFormat for locale-aware formatting\n  if (!format) {\n    return new Intl.DateTimeFormat(locale).format(dateObj);\n  }\n\n  // Use custom format if specified\n  format = format || getDateFormatForLocale(locale);\n  const month = String(dateObj.getMonth() + 1).padStart(2, '0');\n  const day = String(dateObj.getDate()).padStart(2, '0');\n  const year = dateObj.getFullYear();\n\n  let formatted = format;\n  formatted = formatted.replace('MM', month);\n  formatted = formatted.replace('DD', day);\n  formatted = formatted.replace('YYYY', year);\n\n  return formatted;\n}\n\n/**\n * Format a percentage\n * @param {number} value - The value to format as percentage\n * @param {number} decimals - Number of decimal places\n * @returns {string} Formatted percentage\n */\nexport function formatPercentage(value, decimals = 2) {\n  return `${Number(value * 100).toFixed(decimals)}%`;\n}\n\n/**\n * Format a duration in months to years and months\n * @param {number} months - Number of months\n * @returns {string} Formatted duration\n */\nexport function formatDuration(months) {\n  const years = Math.floor(months / 12);\n  const remainingMonths = months % 12;\n\n  let result = '';\n  if (years > 0) {\n    result += `${years} year${years !== 1 ? 's' : ''}`;\n  }\n\n  if (remainingMonths > 0) {\n    if (result.length > 0) {\n      result += ' and ';\n    }\n    result += `${remainingMonths} month${remainingMonths !== 1 ? 's' : ''}`;\n  }\n\n  return result;\n}\n","/**\n * Translations Utility\n * Provides translations for the application in different languages\n */\n\n// English translations (default)\nconst en = {\n  // Calculator form\n  form: {\n    title: 'Loan Calculator',\n    loanAmount: 'Loan Amount',\n    interestRate: 'Interest Rate',\n    loanTerm: 'Loan Term',\n    loanType: 'Loan Type',\n    paymentFrequency: 'Payment Frequency',\n    downPayment: 'Down Payment',\n    additionalPayment: 'Additional Payment',\n    startDate: 'Start Date',\n    calculate: 'Calculate',\n    reset: 'Reset',\n    years: 'Years',\n    months: 'Months',\n    mortgage: 'Mortgage',\n    auto: 'Auto',\n    personal: 'Personal',\n    student: 'Student',\n    monthly: 'Monthly',\n    biWeekly: 'Bi-Weekly',\n    weekly: 'Weekly',\n  },\n\n  // Market rates\n  marketRates: {\n    title: 'Current Market Rates',\n    disclaimer: 'Rates are estimates based on national averages and may vary by location, credit score, and other factors.',\n    averageRate: 'Average Rate',\n    rateRange: 'Rate Range',\n    yourRate: 'Your Rate',\n    difference: 'Difference',\n    belowAverage: 'below average',\n    aboveAverage: 'above average',\n    sameAsAverage: 'same as average',\n    useAverageRate: 'Use Average Rate',\n    lastUpdated: 'Last Updated',\n    viewTrends: 'View Rate Trends',\n    compareRates: 'Compare Your Rate',\n  },\n\n  // Glossary\n  glossary: {\n    title: 'Financial Terms Glossary',\n    openGlossary: 'Open Financial Terms Glossary',\n    close: 'Close Glossary',\n    search: 'Search glossary terms',\n    searchPlaceholder: 'Search for terms...',\n    noResults: 'No matching terms found',\n    searchResults: '{count} terms found',\n    opened: 'Financial glossary opened',\n    closed: 'Financial glossary closed',\n  },\n\n  // Results display\n  results: {\n    monthlyPayment: 'Monthly Payment',\n    totalPayment: 'Total Payment',\n    totalInterest: 'Total Interest',\n    payoffDate: 'Payoff Date',\n    interestSavings: 'Interest Savings',\n    timeReduction: 'Time Reduction',\n    saveCalculation: 'Save Calculation',\n    share: 'Share',\n    export: 'Export',\n    print: 'Print',\n  },\n\n  // Amortization table\n  amortization: {\n    title: 'Amortization Schedule',\n    paymentNumber: 'Payment #',\n    paymentDate: 'Date',\n    payment: 'Payment',\n    principal: 'Principal',\n    interest: 'Interest',\n    balance: 'Balance',\n    totalPrincipal: 'Total Principal',\n    totalInterest: 'Total Interest',\n    filter: 'Filter',\n    showAll: 'Show All',\n    annual: 'Annual Summary',\n    noData: 'No data available',\n  },\n\n  // Charts\n  charts: {\n    title: 'Payment Charts',\n    principalVsInterest: 'Principal vs Interest',\n    paymentBreakdown: 'Payment Breakdown',\n    amortizationSchedule: 'Amortization Schedule',\n    principal: 'Principal',\n    interest: 'Interest',\n    balance: 'Balance',\n    time: 'Time',\n  },\n\n  // Saved calculations\n  savedCalculations: {\n    title: 'Saved Calculations',\n    noSavedCalculations: 'No saved calculations',\n    load: 'Load',\n    delete: 'Delete',\n    compare: 'Compare',\n    rename: 'Rename',\n    confirmDelete: 'Are you sure you want to delete this calculation?',\n    enterName: 'Enter a name for this calculation',\n    defaultName: 'Calculation',\n  },\n\n  // Settings\n  settings: {\n    title: 'Settings',\n    theme: 'Theme',\n    language: 'Language',\n    currency: 'Currency',\n    light: 'Light',\n    dark: 'Dark',\n    dateFormat: 'Date Format',\n    numberFormat: 'Number Format',\n  },\n\n  // Comparison view\n  comparison: {\n    title: 'Loan Comparison',\n    scenario: 'Scenario',\n    difference: 'Difference',\n    savings: 'Savings',\n  },\n\n  // Common\n  common: {\n    yes: 'Yes',\n    no: 'No',\n    ok: 'OK',\n    cancel: 'Cancel',\n    save: 'Save',\n    close: 'Close',\n    loading: 'Loading...',\n    error: 'An error occurred',\n    success: 'Success',\n    warning: 'Warning',\n    info: 'Information',\n  },\n\n  // Tooltips and guidance\n  tooltips: {\n    loanType: 'Select the type of loan you need. Different loan types have different default values and limits.',\n    loanAmount: 'Enter the total amount you wish to borrow.',\n    interestRate: 'The annual interest rate for your loan. Higher rates mean higher monthly payments.',\n    loanTerm: 'The length of time to repay the loan. Longer terms mean lower monthly payments but more interest paid overall.',\n    downPayment: 'Initial payment made upfront. A larger down payment reduces your loan amount and monthly payments.',\n    additionalPayment: 'Extra amount paid each period beyond the required payment. This reduces your loan term and total interest.',\n    paymentFrequency: 'How often you make payments. More frequent payments can reduce total interest paid.',\n    startDate: 'The date when your loan begins and first payment is due.',\n\n    // Results tooltips\n    monthlyPayment: 'The amount you need to pay each period to repay the loan on schedule.',\n    totalPayment: 'The total amount you will pay over the life of the loan, including principal and interest.',\n    totalInterest: 'The total amount of interest you will pay over the life of the loan.',\n    payoffDate: 'The date when your loan will be fully paid off if you make all scheduled payments.',\n    interestSavings: 'The amount of interest you save by making additional payments.',\n\n    // Tutorial\n    startTutorial: 'Start a guided tour of the loan calculator features.',\n    showGuidance: 'Show guidance for interpreting your loan results.',\n\n    // Guidance\n    interpretingResults: 'How to interpret your loan calculation results',\n    affordabilityGuidance: 'Understanding loan affordability',\n    refinanceGuidance: 'When to consider refinancing',\n  },\n\n  // Guidance\n  guidance: {\n    title: 'Loan Calculator Guidance',\n    help: 'Help & Tips',\n    tutorial: 'Interactive Tutorial',\n\n    interpretingResultsTitle: 'Interpreting Your Results',\n    interpretingResultsContent: 'Your loan calculation results show the monthly payment, total payment, total interest, and payoff date. The monthly payment is the amount you need to pay each period to repay the loan on schedule. The total payment is the sum of all payments over the life of the loan. The total interest is the cost of borrowing the money.',\n\n    affordabilityTitle: 'Understanding Loan Affordability',\n    affordabilityContent: 'When determining how much you can afford to borrow, consider the following:',\n    affordabilityTip1: 'Your monthly loan payment should ideally be less than 28% of your gross monthly income.',\n    affordabilityTip2: 'Consider all other debts and expenses when determining affordability.',\n    affordabilityTip3: 'Remember to account for taxes, insurance, and maintenance costs for mortgages.',\n\n    additionalPaymentsTitle: 'Benefits of Additional Payments',\n    additionalPaymentsContent: 'Making additional payments can significantly reduce your loan term and the total interest paid. Even small additional payments can make a big difference over time.',\n\n    refinanceTitle: 'When to Consider Refinancing',\n    refinanceContent: 'Refinancing may be beneficial in the following situations:',\n    refinanceTip1: 'When interest rates have dropped significantly since you obtained your loan.',\n    refinanceTip2: 'When you want to change the term of your loan (shorter or longer).',\n    refinanceTip3: 'When you want to switch from a variable to a fixed-rate loan or vice versa.',\n  },\n\n  // Tutorial\n  tutorial: {\n    loanTypeTitle: 'Loan Type',\n    loanTypeContent: 'Start by selecting the type of loan you need. This will set appropriate defaults for your loan calculation.',\n\n    loanAmountTitle: 'Loan Amount',\n    loanAmountContent: 'Enter the total amount you wish to borrow. You can use the slider or type the exact amount.',\n\n    interestRateTitle: 'Interest Rate',\n    interestRateContent: 'Enter the annual interest rate for your loan. This is the cost of borrowing the money, expressed as a percentage.',\n\n    loanTermTitle: 'Loan Term',\n    loanTermContent: 'Enter the length of time to repay the loan in months. Longer terms mean lower monthly payments but more interest paid overall.',\n\n    termPresetsTitle: 'Term Presets',\n    termPresetsContent: 'Click these buttons to quickly set common loan terms like 5, 15, or 30 years.',\n\n    additionalPaymentTitle: 'Additional Payment',\n    additionalPaymentContent: 'Enter any extra amount you plan to pay each period. This can significantly reduce your loan term and total interest.',\n\n    calculateTitle: 'Calculate',\n    calculateContent: 'Click this button to calculate your loan based on the entered parameters.',\n\n    resultsTitle: 'Results Summary',\n    resultsContent: 'This section shows your monthly payment, total payment, total interest, and payoff date.',\n\n    amortizationTitle: 'Amortization Schedule',\n    amortizationContent: 'This table shows the breakdown of each payment over the life of the loan, including how much goes to principal and interest.',\n\n    chartsTitle: 'Payment Charts',\n    chartsContent: 'These charts visualize your loan data, showing the breakdown of principal vs. interest and the amortization schedule over time.',\n\n    completedTitle: 'Tutorial Completed',\n    completedContent: 'You\\'ve completed the tutorial! You now know how to use the loan calculator to make informed financial decisions.',\n  },\n};\n\n// Spanish translations\nconst es = {\n  // Calculator form\n  form: {\n    title: 'Calculadora de Préstamos',\n    loanAmount: 'Monto del Préstamo',\n    interestRate: 'Tasa de Interés',\n    loanTerm: 'Plazo del Préstamo',\n    loanType: 'Tipo de Préstamo',\n    paymentFrequency: 'Frecuencia de Pago',\n    downPayment: 'Pago Inicial',\n    additionalPayment: 'Pago Adicional',\n    startDate: 'Fecha de Inicio',\n    calculate: 'Calcular',\n    reset: 'Reiniciar',\n    years: 'Años',\n    months: 'Meses',\n    mortgage: 'Hipoteca',\n    auto: 'Auto',\n    personal: 'Personal',\n    student: 'Estudiantil',\n    monthly: 'Mensual',\n    biWeekly: 'Quincenal',\n    weekly: 'Semanal',\n  },\n\n  // Market rates\n  marketRates: {\n    title: 'Tasas Actuales del Mercado',\n    disclaimer: 'Las tasas son estimaciones basadas en promedios nacionales y pueden variar según la ubicación, puntaje crediticio y otros factores.',\n    averageRate: 'Tasa Promedio',\n    rateRange: 'Rango de Tasas',\n    yourRate: 'Su Tasa',\n    difference: 'Diferencia',\n    belowAverage: 'por debajo del promedio',\n    aboveAverage: 'por encima del promedio',\n    sameAsAverage: 'igual al promedio',\n    useAverageRate: 'Usar Tasa Promedio',\n    lastUpdated: 'Última Actualización',\n    viewTrends: 'Ver Tendencias de Tasas',\n    compareRates: 'Comparar Su Tasa',\n  },\n\n  // Glossary\n  glossary: {\n    title: 'Glosario de Términos Financieros',\n    openGlossary: 'Abrir Glosario de Términos Financieros',\n    close: 'Cerrar Glosario',\n    search: 'Buscar términos en el glosario',\n    searchPlaceholder: 'Buscar términos...',\n    noResults: 'No se encontraron términos coincidentes',\n    searchResults: '{count} términos encontrados',\n    opened: 'Glosario financiero abierto',\n    closed: 'Glosario financiero cerrado',\n  },\n\n  // Results display\n  results: {\n    monthlyPayment: 'Pago Mensual',\n    totalPayment: 'Pago Total',\n    totalInterest: 'Interés Total',\n    payoffDate: 'Fecha de Liquidación',\n    interestSavings: 'Ahorro de Intereses',\n    timeReduction: 'Reducción de Tiempo',\n    saveCalculation: 'Guardar Cálculo',\n    share: 'Compartir',\n    export: 'Exportar',\n    print: 'Imprimir',\n  },\n\n  // Amortization table\n  amortization: {\n    title: 'Tabla de Amortización',\n    paymentNumber: '# de Pago',\n    paymentDate: 'Fecha',\n    payment: 'Pago',\n    principal: 'Capital',\n    interest: 'Interés',\n    balance: 'Saldo',\n    totalPrincipal: 'Capital Total',\n    totalInterest: 'Interés Total',\n    filter: 'Filtrar',\n    showAll: 'Mostrar Todo',\n    annual: 'Resumen Anual',\n    noData: 'No hay datos disponibles',\n  },\n\n  // Charts\n  charts: {\n    title: 'Gráficos de Pago',\n    principalVsInterest: 'Capital vs Interés',\n    paymentBreakdown: 'Desglose de Pagos',\n    amortizationSchedule: 'Calendario de Amortización',\n    principal: 'Capital',\n    interest: 'Interés',\n    balance: 'Saldo',\n    time: 'Tiempo',\n  },\n\n  // Saved calculations\n  savedCalculations: {\n    title: 'Cálculos Guardados',\n    noSavedCalculations: 'No hay cálculos guardados',\n    load: 'Cargar',\n    delete: 'Eliminar',\n    compare: 'Comparar',\n    rename: 'Renombrar',\n    confirmDelete: '¿Está seguro de que desea eliminar este cálculo?',\n    enterName: 'Ingrese un nombre para este cálculo',\n    defaultName: 'Cálculo',\n  },\n\n  // Settings\n  settings: {\n    title: 'Configuración',\n    theme: 'Tema',\n    language: 'Idioma',\n    currency: 'Moneda',\n    light: 'Claro',\n    dark: 'Oscuro',\n    dateFormat: 'Formato de Fecha',\n    numberFormat: 'Formato de Número',\n  },\n\n  // Comparison view\n  comparison: {\n    title: 'Comparación de Préstamos',\n    scenario: 'Escenario',\n    difference: 'Diferencia',\n    savings: 'Ahorros',\n  },\n\n  // Common\n  common: {\n    yes: 'Sí',\n    no: 'No',\n    ok: 'Aceptar',\n    cancel: 'Cancelar',\n    save: 'Guardar',\n    close: 'Cerrar',\n    loading: 'Cargando...',\n    error: 'Ocurrió un error',\n    success: 'Éxito',\n    warning: 'Advertencia',\n    info: 'Información',\n  },\n\n  // Tooltips and guidance\n  tooltips: {\n    loanType: 'Seleccione el tipo de préstamo que necesita. Diferentes tipos de préstamos tienen diferentes valores y límites predeterminados.',\n    loanAmount: 'Ingrese el monto total que desea pedir prestado.',\n    interestRate: 'La tasa de interés anual de su préstamo. Tasas más altas significan pagos mensuales más altos.',\n    loanTerm: 'El período de tiempo para pagar el préstamo. Plazos más largos significan pagos mensuales más bajos pero más intereses pagados en general.',\n    downPayment: 'Pago inicial realizado por adelantado. Un pago inicial más grande reduce el monto de su préstamo y los pagos mensuales.',\n    additionalPayment: 'Cantidad adicional pagada en cada período más allá del pago requerido. Esto reduce el plazo de su préstamo y el interés total.',\n    paymentFrequency: 'Con qué frecuencia realiza los pagos. Pagos más frecuentes pueden reducir el interés total pagado.',\n    startDate: 'La fecha en que comienza su préstamo y vence el primer pago.',\n\n    // Results tooltips\n    monthlyPayment: 'La cantidad que debe pagar en cada período para pagar el préstamo según lo programado.',\n    totalPayment: 'El monto total que pagará durante la vida del préstamo, incluido el capital y los intereses.',\n    totalInterest: 'El monto total de interés que pagará durante la vida del préstamo.',\n    payoffDate: 'La fecha en que su préstamo se pagará por completo si realiza todos los pagos programados.',\n    interestSavings: 'La cantidad de interés que ahorra al realizar pagos adicionales.',\n\n    // Tutorial\n    startTutorial: 'Inicie un recorrido guiado por las funciones de la calculadora de préstamos.',\n    showGuidance: 'Mostrar orientación para interpretar los resultados de su préstamo.',\n\n    // Guidance\n    interpretingResults: 'Cómo interpretar los resultados del cálculo de su préstamo',\n    affordabilityGuidance: 'Comprender la asequibilidad del préstamo',\n    refinanceGuidance: 'Cuándo considerar la refinanciación',\n  },\n\n  // Guidance\n  guidance: {\n    title: 'Guía de la Calculadora de Préstamos',\n    help: 'Ayuda y Consejos',\n    tutorial: 'Tutorial Interactivo',\n\n    interpretingResultsTitle: 'Interpretando Sus Resultados',\n    interpretingResultsContent: 'Los resultados del cálculo de su préstamo muestran el pago mensual, el pago total, el interés total y la fecha de liquidación. El pago mensual es la cantidad que debe pagar en cada período para pagar el préstamo según lo programado. El pago total es la suma de todos los pagos durante la vida del préstamo. El interés total es el costo de pedir prestado el dinero.',\n\n    affordabilityTitle: 'Entendiendo la Asequibilidad del Préstamo',\n    affordabilityContent: 'Al determinar cuánto puede permitirse pedir prestado, considere lo siguiente:',\n    affordabilityTip1: 'Su pago mensual del préstamo debería ser idealmente menos del 28% de su ingreso mensual bruto.',\n    affordabilityTip2: 'Considere todas las otras deudas y gastos al determinar la asequibilidad.',\n    affordabilityTip3: 'Recuerde tener en cuenta los impuestos, el seguro y los costos de mantenimiento para las hipotecas.',\n\n    additionalPaymentsTitle: 'Beneficios de los Pagos Adicionales',\n    additionalPaymentsContent: 'Hacer pagos adicionales puede reducir significativamente el plazo de su préstamo y el interés total pagado. Incluso pequeños pagos adicionales pueden hacer una gran diferencia con el tiempo.',\n\n    refinanceTitle: 'Cuándo Considerar la Refinanciación',\n    refinanceContent: 'La refinanciación puede ser beneficiosa en las siguientes situaciones:',\n    refinanceTip1: 'Cuando las tasas de interés han bajado significativamente desde que obtuvo su préstamo.',\n    refinanceTip2: 'Cuando desea cambiar el plazo de su préstamo (más corto o más largo).',\n    refinanceTip3: 'Cuando desea cambiar de un préstamo de tasa variable a uno de tasa fija o viceversa.',\n  },\n\n  // Tutorial\n  tutorial: {\n    loanTypeTitle: 'Tipo de Préstamo',\n    loanTypeContent: 'Comience seleccionando el tipo de préstamo que necesita. Esto establecerá los valores predeterminados apropiados para su cálculo de préstamo.',\n\n    loanAmountTitle: 'Monto del Préstamo',\n    loanAmountContent: 'Ingrese el monto total que desea pedir prestado. Puede usar el control deslizante o escribir el monto exacto.',\n\n    interestRateTitle: 'Tasa de Interés',\n    interestRateContent: 'Ingrese la tasa de interés anual para su préstamo. Este es el costo de pedir prestado el dinero, expresado como un porcentaje.',\n\n    loanTermTitle: 'Plazo del Préstamo',\n    loanTermContent: 'Ingrese el período de tiempo para pagar el préstamo en meses. Plazos más largos significan pagos mensuales más bajos pero más intereses pagados en general.',\n\n    termPresetsTitle: 'Plazos Preestablecidos',\n    termPresetsContent: 'Haga clic en estos botones para establecer rápidamente plazos comunes de préstamos como 5, 15 o 30 años.',\n\n    additionalPaymentTitle: 'Pago Adicional',\n    additionalPaymentContent: 'Ingrese cualquier cantidad adicional que planea pagar en cada período. Esto puede reducir significativamente el plazo de su préstamo y el interés total.',\n\n    calculateTitle: 'Calcular',\n    calculateContent: 'Haga clic en este botón para calcular su préstamo según los parámetros ingresados.',\n\n    resultsTitle: 'Resumen de Resultados',\n    resultsContent: 'Esta sección muestra su pago mensual, pago total, interés total y fecha de liquidación.',\n\n    amortizationTitle: 'Tabla de Amortización',\n    amortizationContent: 'Esta tabla muestra el desglose de cada pago durante la vida del préstamo, incluido cuánto va al capital y al interés.',\n\n    chartsTitle: 'Gráficos de Pago',\n    chartsContent: 'Estos gráficos visualizan los datos de su préstamo, mostrando el desglose de capital versus interés y el calendario de amortización a lo largo del tiempo.',\n\n    completedTitle: 'Tutorial Completado',\n    completedContent: '¡Ha completado el tutorial! Ahora sabe cómo usar la calculadora de préstamos para tomar decisiones financieras informadas.',\n  },\n};\n\n// Available translations\nconst translations = {\n  en,\n  es,\n};\n\n/**\n * Get translation for a key\n * @param {string} key - Translation key in dot notation (e.g., 'form.title')\n * @param {string} language - Language code\n * @returns {string} Translated text or key if translation not found\n */\nexport function getTranslation(key, language = 'en') {\n  const keys = key.split('.');\n  let translation = translations[language] || translations.en;\n\n  for (const k of keys) {\n    translation = translation[k];\n    if (translation === undefined) {\n      return key; // Return key if translation not found\n    }\n  }\n\n  return translation;\n}\n\n/**\n * Get all translations for a language\n * @param {string} language - Language code\n * @returns {Object} Translations object\n */\nexport function getTranslations(language = 'en') {\n  return translations[language] || translations.en;\n}\n\n/**\n * Get available languages\n * @returns {Array} Array of language objects with code and name\n */\nexport function getAvailableLanguages() {\n  return [\n    { code: 'en', name: 'English' },\n    { code: 'es', name: 'Español' },\n  ];\n}\n\nexport default {\n  getTranslation,\n  getTranslations,\n  getAvailableLanguages,\n};\n","/**\n * Tooltips Utility\n * Provides tooltip and guidance functionality for the application\n * Implements requirement 5.2\n */\n\n/**\n * Initialize tooltips for elements with data-tooltip attribute\n * @param {HTMLElement} container - Container element to search for tooltips\n */\nexport function initTooltips(container = document) {\n  const tooltipElements = container.querySelectorAll('[data-tooltip]');\n\n  tooltipElements.forEach((element) => {\n    // Create tooltip element if it doesn't exist\n    let tooltip = element.querySelector('.tooltip');\n    if (!tooltip) {\n      tooltip = document.createElement('div');\n      tooltip.className = 'tooltip';\n      tooltip.setAttribute('role', 'tooltip');\n      tooltip.setAttribute('aria-hidden', 'true');\n\n      // Add tooltip content\n      const tooltipContent = element.getAttribute('data-tooltip');\n      tooltip.textContent = tooltipContent;\n\n      // Add tooltip to element\n      element.appendChild(tooltip);\n\n      // Set position relative for proper tooltip positioning\n      if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n      }\n    }\n\n    // Add event listeners\n    element.addEventListener('mouseenter', showTooltip);\n    element.addEventListener('mouseleave', hideTooltip);\n    element.addEventListener('focus', showTooltip);\n    element.addEventListener('blur', hideTooltip);\n\n    // Add accessibility attributes\n    if (!element.hasAttribute('tabindex')) {\n      element.setAttribute('tabindex', '0');\n    }\n\n    const tooltipId = `tooltip-${Math.random().toString(36).substr(2, 9)}`;\n    tooltip.id = tooltipId;\n    element.setAttribute('aria-describedby', tooltipId);\n  });\n}\n\n/**\n * Show tooltip\n * @param {Event} event - Mouse or focus event\n */\nfunction showTooltip(event) {\n  const element = event.currentTarget;\n  const tooltip = element.querySelector('.tooltip');\n\n  if (tooltip) {\n    // Position tooltip\n    positionTooltip(element, tooltip);\n\n    // Show tooltip\n    tooltip.classList.add('visible');\n    tooltip.setAttribute('aria-hidden', 'false');\n\n    // Announce tooltip for screen readers\n    const tooltipContent = element.getAttribute('data-tooltip');\n    announceTooltip(tooltipContent);\n  }\n}\n\n/**\n * Hide tooltip\n * @param {Event} event - Mouse or blur event\n */\nfunction hideTooltip(event) {\n  const element = event.currentTarget;\n  const tooltip = element.querySelector('.tooltip');\n\n  if (tooltip) {\n    tooltip.classList.remove('visible');\n    tooltip.setAttribute('aria-hidden', 'true');\n  }\n}\n\n/**\n * Position tooltip relative to its parent element\n * @param {HTMLElement} element - Parent element\n * @param {HTMLElement} tooltip - Tooltip element\n */\nfunction positionTooltip(element, tooltip) {\n  // Get position preference from data attribute\n  const position = element.getAttribute('data-tooltip-position') || 'top';\n\n  // Remove all position classes\n  tooltip.classList.remove('tooltip-top', 'tooltip-bottom', 'tooltip-left', 'tooltip-right');\n\n  // Add position class\n  tooltip.classList.add(`tooltip-${position}`);\n\n  // Adjust position if tooltip would go off screen\n  setTimeout(() => {\n    const tooltipRect = tooltip.getBoundingClientRect();\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n\n    // Check if tooltip is off screen\n    if (tooltipRect.left < 0) {\n      tooltip.classList.remove(`tooltip-${position}`);\n      tooltip.classList.add('tooltip-right');\n    } else if (tooltipRect.right > viewportWidth) {\n      tooltip.classList.remove(`tooltip-${position}`);\n      tooltip.classList.add('tooltip-left');\n    } else if (tooltipRect.top < 0) {\n      tooltip.classList.remove(`tooltip-${position}`);\n      tooltip.classList.add('tooltip-bottom');\n    } else if (tooltipRect.bottom > viewportHeight) {\n      tooltip.classList.remove(`tooltip-${position}`);\n      tooltip.classList.add('tooltip-top');\n    }\n  }, 0);\n}\n\n/**\n * Announce tooltip content to screen readers\n * @param {string} content - Tooltip content\n */\nfunction announceTooltip(content) {\n  // Create or get the announcement element\n  let announcer = document.getElementById('tooltip-announcer');\n\n  if (!announcer) {\n    announcer = document.createElement('div');\n    announcer.id = 'tooltip-announcer';\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.classList.add('sr-only');\n    document.body.appendChild(announcer);\n  }\n\n  // Set the message\n  announcer.textContent = '';\n\n  // Force a DOM reflow\n  void announcer.offsetWidth;\n\n  // Set the message\n  announcer.textContent = content;\n}\n\n/**\n * Add guidance tooltip to an element\n * @param {HTMLElement} element - Element to add tooltip to\n * @param {string} content - Tooltip content\n * @param {string} position - Tooltip position (top, bottom, left, right)\n */\nexport function addTooltip(element, content, position = 'top') {\n  if (!element) return;\n\n  element.setAttribute('data-tooltip', content);\n  element.setAttribute('data-tooltip-position', position);\n\n  // Initialize tooltip\n  initTooltips(element.parentNode);\n}\n\n/**\n * Create a guidance panel with detailed information\n * @param {HTMLElement} container - Container to append guidance panel to\n * @param {string} title - Guidance panel title\n * @param {string} content - Guidance panel content (can include HTML)\n * @param {string} id - Unique ID for the guidance panel\n * @returns {HTMLElement} The created guidance panel\n */\nexport function createGuidancePanel(container, title, content, id) {\n  if (!container) return null;\n\n  // Create guidance panel\n  const panel = document.createElement('div');\n  panel.className = 'guidance-panel';\n  panel.id = id || `guidance-${Math.random().toString(36).substr(2, 9)}`;\n\n  // Create panel content\n  panel.innerHTML = `\n    <div class=\"guidance-header\">\n      <h3>${title}</h3>\n      <button class=\"guidance-close\" aria-label=\"Close guidance\">×</button>\n    </div>\n    <div class=\"guidance-content\">\n      ${content}\n    </div>\n  `;\n\n  // Add event listener for close button\n  const closeButton = panel.querySelector('.guidance-close');\n  if (closeButton) {\n    closeButton.addEventListener('click', () => {\n      panel.classList.add('guidance-hidden');\n\n      // Remove panel after animation\n      setTimeout(() => {\n        panel.remove();\n      }, 300);\n    });\n  }\n\n  // Add panel to container\n  container.appendChild(panel);\n\n  // Show panel with animation\n  setTimeout(() => {\n    panel.classList.add('guidance-visible');\n  }, 10);\n\n  return panel;\n}\n\n/**\n * Create an interactive tutorial\n * @param {Array} steps - Array of tutorial steps\n * @param {Function} onComplete - Callback function when tutorial is complete\n */\nexport function createTutorial(steps, onComplete) {\n  if (!steps || !steps.length) return;\n\n  let currentStep = 0;\n\n  // Create tutorial overlay\n  const overlay = document.createElement('div');\n  overlay.className = 'tutorial-overlay';\n  document.body.appendChild(overlay);\n\n  // Show first step\n  showTutorialStep(steps[currentStep]);\n\n  /**\n   * Show a tutorial step\n   * @param {Object} step - Tutorial step\n   */\n  function showTutorialStep(step) {\n    // Find target element\n    const target = document.querySelector(step.selector);\n    if (!target) {\n      console.error(`Tutorial target not found: ${step.selector}`);\n      nextStep();\n      return;\n    }\n\n    // Position highlight around target\n    positionHighlight(target);\n\n    // Create tooltip\n    const tooltip = document.createElement('div');\n    tooltip.className = 'tutorial-tooltip';\n    tooltip.innerHTML = `\n      <div class=\"tutorial-content\">\n        <h3>${step.title}</h3>\n        <p>${step.content}</p>\n      </div>\n      <div class=\"tutorial-controls\">\n        <button class=\"tutorial-prev\" ${currentStep === 0 ? 'disabled' : ''}>Previous</button>\n        <span class=\"tutorial-progress\">${currentStep + 1}/${steps.length}</span>\n        <button class=\"tutorial-next\">${currentStep === steps.length - 1 ? 'Finish' : 'Next'}</button>\n      </div>\n    `;\n\n    // Position tooltip\n    positionTooltipNearTarget(tooltip, target, step.position || 'bottom');\n\n    // Add tooltip to document\n    document.body.appendChild(tooltip);\n\n    // Add event listeners\n    const prevButton = tooltip.querySelector('.tutorial-prev');\n    const nextButton = tooltip.querySelector('.tutorial-next');\n\n    if (prevButton) {\n      prevButton.addEventListener('click', prevStep);\n    }\n\n    if (nextButton) {\n      nextButton.addEventListener('click', nextStep);\n    }\n\n    // Execute step action if provided\n    if (step.action && typeof step.action === 'function') {\n      step.action(target);\n    }\n  }\n\n  /**\n   * Position highlight around target element\n   * @param {HTMLElement} target - Target element\n   */\n  function positionHighlight(target) {\n    const rect = target.getBoundingClientRect();\n\n    // Create highlight element if it doesn't exist\n    let highlight = document.querySelector('.tutorial-highlight');\n    if (!highlight) {\n      highlight = document.createElement('div');\n      highlight.className = 'tutorial-highlight';\n      overlay.appendChild(highlight);\n    }\n\n    // Position highlight\n    highlight.style.top = `${rect.top - 10}px`;\n    highlight.style.left = `${rect.left - 10}px`;\n    highlight.style.width = `${rect.width + 20}px`;\n    highlight.style.height = `${rect.height + 20}px`;\n  }\n\n  /**\n   * Position tooltip near target element\n   * @param {HTMLElement} tooltip - Tooltip element\n   * @param {HTMLElement} target - Target element\n   * @param {string} position - Position (top, bottom, left, right)\n   */\n  function positionTooltipNearTarget(tooltip, target, position) {\n    const rect = target.getBoundingClientRect();\n    const tooltipRect = tooltip.getBoundingClientRect();\n\n    // Set initial position\n    switch (position) {\n      case 'top':\n        tooltip.style.top = `${rect.top - tooltipRect.height - 20}px`;\n        tooltip.style.left = `${rect.left + (rect.width / 2) - (tooltipRect.width / 2)}px`;\n        break;\n      case 'bottom':\n        tooltip.style.top = `${rect.bottom + 20}px`;\n        tooltip.style.left = `${rect.left + (rect.width / 2) - (tooltipRect.width / 2)}px`;\n        break;\n      case 'left':\n        tooltip.style.top = `${rect.top + (rect.height / 2) - (tooltipRect.height / 2)}px`;\n        tooltip.style.left = `${rect.left - tooltipRect.width - 20}px`;\n        break;\n      case 'right':\n        tooltip.style.top = `${rect.top + (rect.height / 2) - (tooltipRect.height / 2)}px`;\n        tooltip.style.left = `${rect.right + 20}px`;\n        break;\n      default:\n        tooltip.style.top = `${rect.bottom + 20}px`;\n        tooltip.style.left = `${rect.left + (rect.width / 2) - (tooltipRect.width / 2)}px`;\n    }\n\n    // Adjust if tooltip is off screen\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n\n    if (parseFloat(tooltip.style.left) < 20) {\n      tooltip.style.left = '20px';\n    } else if (parseFloat(tooltip.style.left) + tooltipRect.width > viewportWidth - 20) {\n      tooltip.style.left = `${viewportWidth - tooltipRect.width - 20}px`;\n    }\n\n    if (parseFloat(tooltip.style.top) < 20) {\n      tooltip.style.top = '20px';\n    } else if (parseFloat(tooltip.style.top) + tooltipRect.height > viewportHeight - 20) {\n      tooltip.style.top = `${viewportHeight - tooltipRect.height - 20}px`;\n    }\n  }\n\n  /**\n   * Go to previous step\n   */\n  function prevStep() {\n    if (currentStep > 0) {\n      // Remove current tooltip\n      const tooltip = document.querySelector('.tutorial-tooltip');\n      if (tooltip) {\n        tooltip.remove();\n      }\n\n      // Go to previous step\n      currentStep--;\n      showTutorialStep(steps[currentStep]);\n    }\n  }\n\n  /**\n   * Go to next step\n   */\n  function nextStep() {\n    // Remove current tooltip\n    const tooltip = document.querySelector('.tutorial-tooltip');\n    if (tooltip) {\n      tooltip.remove();\n    }\n\n    // Check if tutorial is complete\n    if (currentStep === steps.length - 1) {\n      completeTutorial();\n      return;\n    }\n\n    // Go to next step\n    currentStep++;\n    showTutorialStep(steps[currentStep]);\n  }\n\n  /**\n   * Complete tutorial\n   */\n  function completeTutorial() {\n    // Remove overlay and highlight\n    overlay.remove();\n\n    // Call onComplete callback\n    if (onComplete && typeof onComplete === 'function') {\n      onComplete();\n    }\n  }\n}\n\nexport default {\n  initTooltips,\n  addTooltip,\n  createGuidancePanel,\n  createTutorial,\n};\n","/**\n * Animation Manager Utility\n * Manages smooth animations and transitions for UI elements\n * Implements requirements 3.1, 3.4\n */\n\nclass AnimationManager {\n  constructor() {\n    this.animationQueue = [];\n    this.isAnimating = false;\n    this.observers = new Map();\n  }\n\n  /**\n   * Animate results appearing with staggered effect\n   * @param {HTMLElement|string} container - Container element or selector\n   * @param {Object} options - Animation options\n   */\n  animateResultsReveal(container, options = {}) {\n    const element = typeof container === 'string' ? document.querySelector(container) : container;\n    if (!element) return;\n\n    const {\n      stagger = true,\n      delay = 0,\n      duration = 500,\n      easing = 'cubic-bezier(0.4, 0, 0.2, 1)',\n    } = options;\n\n    // Find all animatable children\n    const children = element.querySelectorAll('.summary-item, .breakdown-chart, .chart-item, .results-summary > *, .results-breakdown > *');\n\n    if (children.length === 0) return;\n\n    // Reset any existing animations\n    children.forEach((child) => {\n      child.classList.remove('results-enter', 'results-enter-stagger');\n      child.style.opacity = '0';\n      child.style.transform = 'translateY(30px)';\n    });\n\n    // Start animation after a brief delay\n    setTimeout(() => {\n      if (stagger) {\n        children.forEach((child, index) => {\n          setTimeout(() => {\n            child.classList.add('results-enter-stagger');\n          }, index * 100);\n        });\n      } else {\n        children.forEach((child) => {\n          child.classList.add('results-enter');\n        });\n      }\n    }, delay);\n  }\n\n  /**\n   * Animate chart reveal with scale effect\n   * @param {HTMLElement|string} container - Container element or selector\n   * @param {Object} options - Animation options\n   */\n  animateChartReveal(container, options = {}) {\n    const element = typeof container === 'string' ? document.querySelector(container) : container;\n    if (!element) return;\n\n    const { delay = 300 } = options;\n\n    // Reset animation state\n    element.classList.remove('chart-reveal', 'chart-reveal-delayed');\n    element.style.opacity = '0';\n    element.style.transform = 'scale(0.8)';\n\n    // Start animation\n    setTimeout(() => {\n      element.classList.add(delay > 0 ? 'chart-reveal-delayed' : 'chart-reveal');\n    }, delay);\n  }\n\n  /**\n   * Animate table rows appearing\n   * @param {HTMLElement|string} table - Table element or selector\n   * @param {Object} options - Animation options\n   */\n  animateTableRows(table, options = {}) {\n    const element = typeof table === 'string' ? document.querySelector(table) : table;\n    if (!element) return;\n\n    const { delay = 0, staggerDelay = 50 } = options;\n    const rows = element.querySelectorAll('tbody tr');\n\n    if (rows.length === 0) return;\n\n    // Reset animation state\n    rows.forEach((row) => {\n      row.classList.remove('table-row-enter');\n      row.style.opacity = '0';\n      row.style.transform = 'translateX(-20px)';\n    });\n\n    // Start animation\n    setTimeout(() => {\n      rows.forEach((row, index) => {\n        setTimeout(() => {\n          row.classList.add('table-row-enter');\n        }, index * staggerDelay);\n      });\n    }, delay);\n  }\n\n  /**\n   * Animate number changes with counter effect\n   * @param {HTMLElement} element - Element containing the number\n   * @param {number} from - Starting number\n   * @param {number} to - Ending number\n   * @param {Object} options - Animation options\n   */\n  animateNumber(element, from, to, options = {}) {\n    if (!element) return;\n\n    const {\n      duration = 1000,\n      formatter = (num) => num.toLocaleString(),\n      easing = 'easeOutCubic',\n    } = options;\n\n    const startTime = performance.now();\n    const difference = to - from;\n\n    const easingFunctions = {\n      linear: (t) => t,\n      easeOutCubic: (t) => 1 - (1 - t) ** 3,\n      easeInOutCubic: (t) => (t < 0.5 ? 4 * t * t * t : 1 - (-2 * t + 2) ** 3 / 2),\n    };\n\n    const easingFunction = easingFunctions[easing] || easingFunctions.easeOutCubic;\n\n    element.classList.add('number-counter', 'updating');\n\n    const animate = (currentTime) => {\n      const elapsed = currentTime - startTime;\n      const progress = Math.min(elapsed / duration, 1);\n      const easedProgress = easingFunction(progress);\n\n      const currentValue = from + (difference * easedProgress);\n      element.textContent = formatter(currentValue);\n\n      if (progress < 1) {\n        requestAnimationFrame(animate);\n      } else {\n        element.classList.remove('updating');\n        element.textContent = formatter(to);\n      }\n    };\n\n    requestAnimationFrame(animate);\n  }\n\n  /**\n   * Animate progress bar fill\n   * @param {HTMLElement|string} progressBar - Progress bar element or selector\n   * @param {number} percentage - Target percentage (0-100)\n   * @param {Object} options - Animation options\n   */\n  animateProgressBar(progressBar, percentage, options = {}) {\n    const element = typeof progressBar === 'string' ? document.querySelector(progressBar) : progressBar;\n    if (!element) return;\n\n    const { duration = 1000, delay = 0 } = options;\n    const fill = element.querySelector('.breakdown-principal, .breakdown-interest, .progress-fill');\n\n    if (!fill) return;\n\n    setTimeout(() => {\n      fill.style.transition = `width ${duration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`;\n      fill.style.width = `${Math.min(100, Math.max(0, percentage))}%`;\n    }, delay);\n  }\n\n  /**\n   * Add hover animations to elements\n   * @param {HTMLElement|string} container - Container element or selector\n   * @param {string} selector - Selector for elements to animate\n   */\n  addHoverAnimations(container, selector) {\n    const element = typeof container === 'string' ? document.querySelector(container) : container;\n    if (!element) return;\n\n    const targets = element.querySelectorAll(selector);\n\n    targets.forEach((target) => {\n      target.addEventListener('mouseenter', () => {\n        target.style.transform = 'translateY(-2px)';\n        target.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';\n      });\n\n      target.addEventListener('mouseleave', () => {\n        target.style.transform = '';\n        target.style.boxShadow = '';\n      });\n    });\n  }\n\n  /**\n   * Create ripple effect on button click\n   * @param {HTMLElement} button - Button element\n   * @param {Event} event - Click event\n   */\n  createRippleEffect(button, event) {\n    if (!button || !event) return;\n\n    const rect = button.getBoundingClientRect();\n    const size = Math.max(rect.width, rect.height);\n    const x = event.clientX - rect.left - size / 2;\n    const y = event.clientY - rect.top - size / 2;\n\n    const ripple = document.createElement('div');\n    ripple.style.cssText = `\n      position: absolute;\n      width: ${size}px;\n      height: ${size}px;\n      left: ${x}px;\n      top: ${y}px;\n      background: rgba(255, 255, 255, 0.3);\n      border-radius: 50%;\n      transform: scale(0);\n      animation: ripple 0.6s linear;\n      pointer-events: none;\n    `;\n\n    button.style.position = 'relative';\n    button.style.overflow = 'hidden';\n    button.appendChild(ripple);\n\n    setTimeout(() => {\n      ripple.remove();\n    }, 600);\n  }\n\n  /**\n   * Animate element entrance with intersection observer\n   * @param {string} selector - Selector for elements to observe\n   * @param {Object} options - Animation options\n   */\n  observeAndAnimate(selector, options = {}) {\n    const {\n      threshold = 0.1,\n      rootMargin = '0px 0px -50px 0px',\n      animationClass = 'results-enter',\n    } = options;\n\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          entry.target.classList.add(animationClass);\n          observer.unobserve(entry.target);\n        }\n      });\n    }, {\n      threshold,\n      rootMargin,\n    });\n\n    const elements = document.querySelectorAll(selector);\n    elements.forEach((element) => {\n      observer.observe(element);\n    });\n\n    this.observers.set(selector, observer);\n  }\n\n  /**\n   * Remove all observers\n   */\n  disconnectObservers() {\n    this.observers.forEach((observer) => {\n      observer.disconnect();\n    });\n    this.observers.clear();\n  }\n\n  /**\n   * Queue animation for sequential execution\n   * @param {Function} animationFunction - Function that performs the animation\n   * @param {number} delay - Delay before executing this animation\n   */\n  queueAnimation(animationFunction, delay = 0) {\n    this.animationQueue.push({ fn: animationFunction, delay });\n\n    if (!this.isAnimating) {\n      this.processQueue();\n    }\n  }\n\n  /**\n   * Process animation queue\n   * @private\n   */\n  async processQueue() {\n    if (this.animationQueue.length === 0) {\n      this.isAnimating = false;\n      return;\n    }\n\n    this.isAnimating = true;\n    const { fn, delay } = this.animationQueue.shift();\n\n    if (delay > 0) {\n      await new Promise((resolve) => setTimeout(resolve, delay));\n    }\n\n    try {\n      await fn();\n    } catch (error) {\n      console.error('Animation error:', error);\n    }\n\n    // Process next animation\n    this.processQueue();\n  }\n\n  /**\n   * Clear animation queue\n   */\n  clearQueue() {\n    this.animationQueue = [];\n    this.isAnimating = false;\n  }\n\n  /**\n   * Check if user prefers reduced motion\n   * @returns {boolean} True if reduced motion is preferred\n   */\n  prefersReducedMotion() {\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n  }\n\n  /**\n   * Animate with respect to user preferences\n   * @param {Function} animationFunction - Animation to run\n   * @param {Function} fallbackFunction - Fallback for reduced motion\n   */\n  respectfulAnimate(animationFunction, fallbackFunction = null) {\n    if (this.prefersReducedMotion()) {\n      if (fallbackFunction) {\n        fallbackFunction();\n      }\n    } else {\n      animationFunction();\n    }\n  }\n}\n\n// Add ripple animation CSS if not already present\nif (!document.querySelector('#ripple-animation-styles')) {\n  const style = document.createElement('style');\n  style.id = 'ripple-animation-styles';\n  style.textContent = `\n    @keyframes ripple {\n      to {\n        transform: scale(4);\n        opacity: 0;\n      }\n    }\n  `;\n  document.head.appendChild(style);\n}\n\n// Create singleton instance\nconst animationManager = new AnimationManager();\n\nexport default animationManager;\n","/**\n * Accessibility Utility\n * Provides functions for improving application accessibility\n * Implements requirements 6.1, 6.2, 6.5, 6.6\n */\n\n/**\n * Set focus to an element\n * @param {HTMLElement} element - Element to focus\n */\nexport function setFocus(element) {\n  if (element && typeof element.focus === 'function') {\n    element.focus();\n  }\n}\n\n/**\n * Add keyboard navigation to a component\n * @param {HTMLElement} container - Container element\n * @param {string} selector - Selector for focusable elements\n * @param {boolean} loop - Whether to loop from last to first element\n */\nexport function addKeyboardNavigation(container, selector = 'a, button, input, select, textarea, [tabindex]:not([tabindex=\"-1\"])', loop = true) {\n  if (!container) return;\n\n  const focusableElements = container.querySelectorAll(selector);\n  if (focusableElements.length === 0) return;\n\n  container.addEventListener('keydown', (e) => {\n    // Tab key navigation\n    if (e.key === 'Tab') {\n      const firstElement = focusableElements[0];\n      const lastElement = focusableElements[focusableElements.length - 1];\n\n      // Shift + Tab on first element\n      if (e.shiftKey && document.activeElement === firstElement) {\n        if (loop) {\n          e.preventDefault();\n          lastElement.focus();\n        }\n      } else if (!e.shiftKey && document.activeElement === lastElement) { // Tab on last element\n        if (loop) {\n          e.preventDefault();\n          firstElement.focus();\n        }\n      }\n    }\n  });\n}\n\n/**\n * Make an element announce a message to screen readers\n * @param {string} message - Message to announce\n * @param {string} ariaLive - ARIA live value ('polite' or 'assertive')\n */\nexport function announceToScreenReader(message, ariaLive = 'polite') {\n  // Create or get the announcement element\n  let announcer = document.getElementById('screen-reader-announcer');\n\n  if (!announcer) {\n    announcer = document.createElement('div');\n    announcer.id = 'screen-reader-announcer';\n    announcer.setAttribute('aria-live', ariaLive);\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.classList.add('sr-only');\n    document.body.appendChild(announcer);\n  }\n\n  // Set the message\n  announcer.textContent = '';\n\n  // Force a DOM reflow\n  void announcer.offsetWidth;\n\n  // Set the message\n  announcer.textContent = message;\n}\n\n/**\n * Add internationalization support to an element\n * @param {HTMLElement} element - Element to update\n * @param {string} textContent - Text content to set\n * @param {string} language - Language code\n */\nexport function setInternationalizedText(element, textContent, language = 'en') {\n  if (!element) return;\n\n  element.textContent = textContent;\n  element.setAttribute('lang', language);\n\n  // Set text direction based on language\n  const rtlLanguages = ['ar', 'he', 'fa', 'ur'];\n  if (rtlLanguages.includes(language)) {\n    element.setAttribute('dir', 'rtl');\n  } else {\n    element.setAttribute('dir', 'ltr');\n  }\n}\n\n/**\n * Update document language\n * @param {string} language - Language code\n */\nexport function updateDocumentLanguage(language = 'en') {\n  document.documentElement.setAttribute('lang', language);\n\n  // Set text direction based on language\n  const rtlLanguages = ['ar', 'he', 'fa', 'ur'];\n  if (rtlLanguages.includes(language)) {\n    document.documentElement.setAttribute('dir', 'rtl');\n  } else {\n    document.documentElement.setAttribute('dir', 'ltr');\n  }\n}\n\nexport default {\n  setFocus,\n  addKeyboardNavigation,\n  announceToScreenReader,\n  setInternationalizedText,\n  updateDocumentLanguage,\n};\n","/**\n * Calculation Manager Service\n * Manages saved loan calculations with naming, organization, and comparison features\n * Implements requirements 1.4, 3.3\n */\n\nimport StorageService from './storage.service.js';\nimport Loan from '../models/loan.model.js';\nimport { AmortizationSchedule } from '../models/amortization.model.js';\n\nclass CalculationManagerService {\n  /**\n   * Create a new calculation manager service\n   * @param {Object} options - Configuration options\n   * @param {StorageService} [options.storageService] - Storage service instance\n   * @param {number} [options.maxComparisons] - Maximum number of calculations that can be compared\n   */\n  constructor(options = {}) {\n    this.storageService = options.storageService || new StorageService();\n    this.maxComparisons = options.maxComparisons || 3;\n    this.selectedCalculations = [];\n  }\n\n  /**\n   * Get all saved calculations with additional metadata\n   * @returns {Array} Array of calculation objects with metadata\n   */\n  getAllCalculations() {\n    const calculations = this.storageService.getCalculations();\n\n    // Add additional metadata and sort by date (newest first)\n    return calculations\n      .map((calc) => ({\n        ...calc,\n        isSelected: this.isSelected(calc.loan.id),\n        formattedDate: this._formatDate(calc.savedAt),\n      }))\n      .sort((a, b) => b.savedAt - a.savedAt);\n  }\n\n  /**\n   * Get a calculation by ID with full details\n   * @param {string} id - Calculation ID\n   * @returns {Object|null} Calculation object with loan and amortization schedule\n   */\n  getCalculation(id) {\n    return this.storageService.getCalculationById(id);\n  }\n\n  /**\n   * Save a calculation with a custom name\n   * @param {Loan} loan - Loan object\n   * @param {AmortizationSchedule} [amortizationSchedule] - Amortization schedule\n   * @param {string} [name] - Custom name for the calculation\n   * @returns {string} ID of the saved calculation\n   */\n  saveCalculation(loan, amortizationSchedule = null, name = null) {\n    // Update the loan name if provided\n    if (name && name.trim()) {\n      loan = loan.update({ name: name.trim() });\n    }\n\n    return this.storageService.saveCalculation(loan, amortizationSchedule);\n  }\n\n  /**\n   * Update an existing calculation\n   * @param {string} id - Calculation ID\n   * @param {Object} updates - Updates to apply\n   * @param {string} [updates.name] - New name\n   * @param {Object} [updates.loanUpdates] - Updates to apply to the loan\n   * @returns {boolean} Success status\n   */\n  updateCalculation(id, updates = {}) {\n    // Get the existing calculation\n    const calculation = this.storageService.getCalculationById(id);\n    if (!calculation) {\n      return false;\n    }\n\n    // Apply updates\n    let updatedLoan = calculation.loan;\n\n    // Update name if provided\n    if (updates.name) {\n      updatedLoan = updatedLoan.update({ name: updates.name.trim() });\n    }\n\n    // Apply other loan updates if provided\n    if (updates.loanUpdates) {\n      updatedLoan = updatedLoan.update(updates.loanUpdates);\n    }\n\n    // Generate new amortization schedule if needed\n    let updatedSchedule = calculation.amortizationSchedule;\n    if (updates.loanUpdates) {\n      updatedSchedule = new AmortizationSchedule(updatedLoan);\n    }\n\n    // Save the updated calculation\n    return this.storageService.updateCalculation(id, updatedLoan, updatedSchedule);\n  }\n\n  /**\n   * Delete a calculation\n   * @param {string} id - Calculation ID\n   * @returns {boolean} Success status\n   */\n  deleteCalculation(id) {\n    // Remove from selected calculations if present\n    this.deselectCalculation(id);\n\n    // Delete from storage\n    return this.storageService.deleteCalculation(id);\n  }\n\n  /**\n   * Select a calculation for comparison\n   * @param {string} id - Calculation ID\n   * @returns {boolean} Success status\n   */\n  selectCalculation(id) {\n    // Check if already selected\n    if (this.isSelected(id)) {\n      return true;\n    }\n\n    // Check if we've reached the maximum number of comparisons\n    if (this.selectedCalculations.length >= this.maxComparisons) {\n      return false;\n    }\n\n    // Add to selected calculations\n    this.selectedCalculations.push(id);\n    return true;\n  }\n\n  /**\n   * Deselect a calculation\n   * @param {string} id - Calculation ID\n   * @returns {boolean} Success status\n   */\n  deselectCalculation(id) {\n    const index = this.selectedCalculations.indexOf(id);\n    if (index !== -1) {\n      this.selectedCalculations.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Check if a calculation is selected\n   * @param {string} id - Calculation ID\n   * @returns {boolean} Whether the calculation is selected\n   */\n  isSelected(id) {\n    return this.selectedCalculations.includes(id);\n  }\n\n  /**\n   * Clear all selected calculations\n   */\n  clearSelection() {\n    this.selectedCalculations = [];\n  }\n\n  /**\n   * Get selected calculations for comparison\n   * @returns {Array} Array of selected calculation objects\n   */\n  getSelectedCalculations() {\n    return this.selectedCalculations.map((id) => {\n      const calculation = this.storageService.getCalculationById(id);\n      return calculation ? {\n        id,\n        loan: calculation.loan,\n        amortizationSchedule: calculation.amortizationSchedule,\n        savedAt: calculation.savedAt,\n      } : null;\n    }).filter((calc) => calc !== null);\n  }\n\n  /**\n   * Compare selected calculations\n   * @returns {Object} Comparison results\n   */\n  compareCalculations() {\n    const selected = this.getSelectedCalculations();\n\n    if (selected.length < 2) {\n      return {\n        success: false,\n        message: 'At least two calculations must be selected for comparison',\n      };\n    }\n\n    // Create comparison data structure\n    const comparison = {\n      calculations: selected,\n      metrics: this._generateComparisonMetrics(selected),\n      differences: this._calculateDifferences(selected),\n    };\n\n    return {\n      success: true,\n      comparison,\n    };\n  }\n\n  /**\n   * Generate metrics for comparison\n   * @param {Array} calculations - Array of calculation objects\n   * @returns {Object} Comparison metrics\n   * @private\n   */\n  _generateComparisonMetrics(calculations) {\n    return calculations.map((calc) => {\n      const { loan } = calc;\n      const schedule = calc.amortizationSchedule;\n\n      return {\n        id: calc.id,\n        name: loan.name,\n        principal: loan.principal,\n        downPayment: loan.downPayment,\n        loanAmount: loan.totalLoanAmount,\n        interestRate: loan.interestRate,\n        term: loan.term,\n        paymentFrequency: loan.paymentFrequency,\n        paymentAmount: loan.paymentAmount,\n        totalInterest: schedule ? schedule.totalInterest : loan.totalInterest,\n        totalPayment: schedule ? schedule.totalPayment : (loan.paymentAmount * loan.numberOfPayments),\n        payoffDate: schedule ? schedule.payoffDate : loan.payoffDate,\n      };\n    });\n  }\n\n  /**\n   * Calculate differences between calculations\n   * @param {Array} calculations - Array of calculation objects\n   * @returns {Object} Differences between calculations\n   * @private\n   */\n  _calculateDifferences(calculations) {\n    if (calculations.length < 2) {\n      return {};\n    }\n\n    // Use the first calculation as the baseline\n    const baseline = calculations[0];\n    const differences = {};\n\n    // Compare each calculation to the baseline\n    for (let i = 1; i < calculations.length; i++) {\n      const current = calculations[i];\n      const diff = {\n        paymentDifference: current.loan.paymentAmount - baseline.loan.paymentAmount,\n        interestDifference: 0,\n        totalPaymentDifference: 0,\n        termDifference: current.loan.term - baseline.loan.term,\n      };\n\n      // Calculate interest and total payment differences if schedules are available\n      if (baseline.amortizationSchedule && current.amortizationSchedule) {\n        diff.interestDifference = current.amortizationSchedule.totalInterest - baseline.amortizationSchedule.totalInterest;\n        diff.totalPaymentDifference = current.amortizationSchedule.totalPayment - baseline.amortizationSchedule.totalPayment;\n      } else {\n        // Estimate if schedules aren't available\n        diff.interestDifference = (current.loan.paymentAmount * current.loan.numberOfPayments)\n          - (baseline.loan.paymentAmount * baseline.loan.numberOfPayments);\n        diff.totalPaymentDifference = diff.interestDifference;\n      }\n\n      differences[current.id] = diff;\n    }\n\n    return differences;\n  }\n\n  /**\n   * Format a date for display\n   * @param {Date} date - Date to format\n   * @returns {string} Formatted date string\n   * @private\n   */\n  _formatDate(date) {\n    if (!date) return '';\n\n    return date.toLocaleDateString(undefined, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  }\n\n  /**\n   * Organize calculations by creating categories/folders (for future implementation)\n   * @param {Array} calculationIds - Array of calculation IDs\n   * @param {string} category - Category name\n   * @returns {boolean} Success status\n   */\n  organizeCalculations(calculationIds, category) {\n    // This is a placeholder for future implementation\n    // Would require extending the storage service to support categories\n    console.log(`Organizing calculations ${calculationIds.join(', ')} into category \"${category}\"`);\n    return true;\n  }\n\n  /**\n   * Get storage statistics\n   * @returns {Object} Storage statistics\n   */\n  getStorageStats() {\n    return this.storageService.getStorageStats();\n  }\n}\n\nexport default CalculationManagerService;\n","/**\n * Language Service\n * Manages language settings and translations for the application\n * Implements requirements 6.3, 6.4\n */\n\nimport { getTranslation, getTranslations, getAvailableLanguages } from '../utils/translations.js';\nimport { getLocaleFromLanguage } from '../utils/formatters.js';\nimport { updateDocumentLanguage } from '../utils/accessibility.js';\n\nclass LanguageService {\n  /**\n   * Create a new language service\n   * @param {Object} options - Configuration options\n   */\n  constructor(options = {}) {\n    this.currentLanguage = options.defaultLanguage || 'en';\n    this.storageKey = 'loan-calculator-language';\n    this.listeners = [];\n\n    // Load saved language\n    this.loadLanguage();\n  }\n\n  /**\n   * Load language from local storage\n   */\n  loadLanguage() {\n    try {\n      const savedLanguage = localStorage.getItem(this.storageKey);\n      if (savedLanguage) {\n        this.currentLanguage = savedLanguage;\n      }\n    } catch (error) {\n      console.error('Error loading language setting:', error);\n    }\n  }\n\n  /**\n   * Save language to local storage\n   */\n  saveLanguage() {\n    try {\n      localStorage.setItem(this.storageKey, this.currentLanguage);\n    } catch (error) {\n      console.error('Error saving language setting:', error);\n    }\n  }\n\n  /**\n   * Get current language\n   * @returns {string} Current language code\n   */\n  getLanguage() {\n    return this.currentLanguage;\n  }\n\n  /**\n   * Get current locale based on language\n   * @returns {string} Current locale\n   */\n  getLocale() {\n    return getLocaleFromLanguage(this.currentLanguage);\n  }\n\n  /**\n   * Set language\n   * @param {string} language - Language code\n   */\n  setLanguage(language) {\n    if (this.currentLanguage !== language) {\n      this.currentLanguage = language;\n      this.saveLanguage();\n\n      // Update document language for accessibility\n      updateDocumentLanguage(language);\n\n      this.notifyListeners();\n\n      // Dispatch a custom event for components to react to language change\n      const languageChangeEvent = new CustomEvent('languagechange', {\n        detail: { language },\n      });\n      document.dispatchEvent(languageChangeEvent);\n    }\n  }\n\n  /**\n   * Get translation for a key\n   * @param {string} key - Translation key\n   * @returns {string} Translated text\n   */\n  translate(key) {\n    return getTranslation(key, this.currentLanguage);\n  }\n\n  /**\n   * Get all translations for current language\n   * @returns {Object} Translations object\n   */\n  getAllTranslations() {\n    return getTranslations(this.currentLanguage);\n  }\n\n  /**\n   * Get available languages\n   * @returns {Array} Array of language objects\n   */\n  getAvailableLanguages() {\n    return getAvailableLanguages();\n  }\n\n  /**\n   * Add language change listener\n   * @param {Function} listener - Callback function\n   */\n  addListener(listener) {\n    if (typeof listener === 'function' && !this.listeners.includes(listener)) {\n      this.listeners.push(listener);\n    }\n  }\n\n  /**\n   * Remove language change listener\n   * @param {Function} listener - Callback function to remove\n   */\n  removeListener(listener) {\n    const index = this.listeners.indexOf(listener);\n    if (index !== -1) {\n      this.listeners.splice(index, 1);\n    }\n  }\n\n  /**\n   * Notify all listeners of language change\n   */\n  notifyListeners() {\n    this.listeners.forEach((listener) => {\n      try {\n        listener(this.currentLanguage);\n      } catch (error) {\n        console.error('Error in language change listener:', error);\n      }\n    });\n  }\n}\n\nexport default LanguageService;\n","/**\n * Validators Utility\n * Provides validation functions for form inputs\n */\n\n/**\n * Validate that a value is a number\n * @param {any} value - The value to validate\n * @returns {boolean} True if valid\n */\nexport function isNumber(value) {\n  return !isNaN(parseFloat(value)) && isFinite(value);\n}\n\n/**\n * Validate that a value is a positive number\n * @param {any} value - The value to validate\n * @returns {boolean} True if valid\n */\nexport function isPositiveNumber(value) {\n  return isNumber(value) && parseFloat(value) > 0;\n}\n\n/**\n * Validate that a value is within a range\n * @param {any} value - The value to validate\n * @param {number} min - Minimum value\n * @param {number} max - Maximum value\n * @returns {boolean} True if valid\n */\nexport function isInRange(value, min, max) {\n  return isNumber(value) && parseFloat(value) >= min && parseFloat(value) <= max;\n}\n\n/**\n * Validate that a value is a valid interest rate\n * @param {any} value - The value to validate\n * @returns {boolean} True if valid\n */\nexport function isValidInterestRate(value) {\n  return isInRange(value, 0, 100);\n}\n\n/**\n * Validate that a value is a valid inflation rate\n * @param {any} value - The value to validate\n * @returns {boolean} True if valid\n */\nexport function isValidInflationRate(value) {\n  return isInRange(value, 0, 20);\n}\n\n/**\n * Validate that a value is a valid loan term in months\n * @param {any} value - The value to validate\n * @returns {boolean} True if valid\n */\nexport function isValidLoanTerm(value) {\n  return isNumber(value) && Number.isInteger(parseFloat(value)) && parseFloat(value) > 0;\n}\n\n/**\n * Validate that a value is a valid date\n * @param {any} value - The value to validate\n * @returns {boolean} True if valid\n */\nexport function isValidDate(value) {\n  if (value instanceof Date) {\n    return !isNaN(value.getTime());\n  }\n\n  const date = new Date(value);\n  return !isNaN(date.getTime());\n}\n\n/**\n * Validate that a value is not empty\n * @param {any} value - The value to validate\n * @returns {boolean} True if valid\n */\nexport function isNotEmpty(value) {\n  return value !== null && value !== undefined && String(value).trim() !== '';\n}\n\n/**\n * Get validation error message\n * @param {string} validationType - Type of validation\n * @param {any} value - The value that failed validation\n * @param {Object} options - Additional options for error message\n * @returns {string} Error message\n */\nexport function getValidationErrorMessage(validationType, value, options = {}) {\n  const messages = {\n    isNumber: 'Please enter a valid number.',\n    isPositiveNumber: 'Please enter a positive number.',\n    isInRange: `Please enter a number between ${options.min} and ${options.max}.`,\n    isValidInterestRate: 'Please enter a valid interest rate between 0 and 100.',\n    isValidInflationRate: 'Please enter a valid inflation rate between 0 and 20.',\n    isValidLoanTerm: 'Please enter a valid loan term (positive whole number).',\n    isValidDate: 'Please enter a valid date.',\n    isNotEmpty: 'This field is required.',\n  };\n\n  return messages[validationType] || 'Invalid input.';\n}\n"],"names":["constructor","options","this","storageKey","version","_initializeStorage","data","localStorage","getItem","parsedData","JSON","parse","_migrateData","defaultData","lastUpdated","Date","toISOString","calculations","setItem","stringify","error","oldData","migratedData","_getData","_saveData","name","code","_handleStorageLimit","length","sort","a","b","updatedAt","shift","saveCalculation","loan","amortizationSchedule","Error","calculationData","toJSON","savedAt","existingIndex","findIndex","calc","id","push","getCalculations","map","Loan","fromJSON","getCalculationById","find","AmortizationSchedule","updateCalculation","updatedLoan","updatedSchedule","deleteCalculation","index","splice","clearAllCalculations","isStorageAvailable","testKey","result","removeItem","e","getStorageStats","allData","serializedData","usedBytes","Blob","size","totalBytes","usedKB","Math","round","totalKB","percentUsed","itemCount","isNearingLimit","loadingManager","activeLoadings","Map","loadingOverlay","showSkeleton","container","type","element","document","querySelector","skeletonId","now","skeletonHtml","generateSkeletonHtml","set","originalContent","innerHTML","classList","add","hideSkeleton","restoreContent","loading","get","remove","delete","showProgressOverlay","steps","title","message","cancellable","onCancel","hideProgressOverlay","createElement","className","generateProgressSteps","body","appendChild","cancelBtn","addEventListener","requestAnimationFrame","style","opacity","updateProgress","progress","currentStep","progressFill","progressText","width","min","max","textContent","updateStepStatus","stepId","status","step","circle","dataset","stepNumber","setTimeout","parentNode","removeChild","showInlineLoader","loaderId","spinnerHtml","generateSpinnerHtml","hideInlineLoader","generateResultsSkeleton","generateTableSkeleton","generateChartSkeleton","generateFormSkeleton","items","Array","fill","join","rows","columns","_","i","legend","fields","label","clearAll","forEach","clear","getLocaleFromLanguage","language","en","es","formatNumber","value","decimals","locale","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","formatCurrency","currencyCode","currency","formatDate","date","dateObj","DateTimeFormat","getDateFormatForLocale","month","String","getMonth","padStart","day","getDate","year","getFullYear","formatted","replace","formatPercentage","Number","toFixed","formatDuration","months","years","floor","remainingMonths","translations","form","loanAmount","interestRate","loanTerm","loanType","paymentFrequency","downPayment","additionalPayment","startDate","calculate","reset","mortgage","auto","personal","student","monthly","biWeekly","weekly","marketRates","disclaimer","averageRate","rateRange","yourRate","difference","belowAverage","aboveAverage","sameAsAverage","useAverageRate","viewTrends","compareRates","glossary","openGlossary","close","search","searchPlaceholder","noResults","searchResults","opened","closed","results","monthlyPayment","totalPayment","totalInterest","payoffDate","interestSavings","timeReduction","share","export","print","amortization","paymentNumber","paymentDate","payment","principal","interest","balance","totalPrincipal","filter","showAll","annual","noData","charts","principalVsInterest","paymentBreakdown","time","savedCalculations","noSavedCalculations","load","compare","rename","confirmDelete","enterName","defaultName","settings","theme","light","dark","dateFormat","numberFormat","comparison","scenario","savings","common","yes","no","ok","cancel","save","success","warning","info","tooltips","startTutorial","showGuidance","interpretingResults","affordabilityGuidance","refinanceGuidance","guidance","help","tutorial","interpretingResultsTitle","interpretingResultsContent","affordabilityTitle","affordabilityContent","affordabilityTip1","affordabilityTip2","affordabilityTip3","additionalPaymentsTitle","additionalPaymentsContent","refinanceTitle","refinanceContent","refinanceTip1","refinanceTip2","refinanceTip3","loanTypeTitle","loanTypeContent","loanAmountTitle","loanAmountContent","interestRateTitle","interestRateContent","loanTermTitle","loanTermContent","termPresetsTitle","termPresetsContent","additionalPaymentTitle","additionalPaymentContent","calculateTitle","calculateContent","resultsTitle","resultsContent","amortizationTitle","amortizationContent","chartsTitle","chartsContent","completedTitle","completedContent","getTranslation","key","keys","split","translation","k","undefined","getTranslations","getAvailableLanguages","initTooltips","querySelectorAll","tooltip","setAttribute","tooltipContent","getAttribute","getComputedStyle","position","showTooltip","hideTooltip","hasAttribute","tooltipId","random","toString","substr","event","currentTarget","tooltipRect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","left","right","top","bottom","positionTooltip","content","announcer","getElementById","offsetWidth","announceTooltip","createGuidancePanel","panel","closeButton","createTutorial","onComplete","overlay","showTutorialStep","target","selector","nextStep","rect","highlight","height","positionHighlight","parseFloat","positionTooltipNearTarget","prevButton","nextButton","prevStep","action","head","animationManager","animationQueue","isAnimating","observers","animateResultsReveal","stagger","delay","duration","easing","children","child","transform","animateChartReveal","animateTableRows","table","staggerDelay","row","animateNumber","from","to","formatter","num","toLocaleString","startTime","performance","easingFunctions","linear","t","easeOutCubic","easeInOutCubic","easingFunction","animate","currentTime","elapsed","easedProgress","currentValue","animateProgressBar","progressBar","percentage","transition","addHoverAnimations","boxShadow","createRippleEffect","button","x","clientX","y","clientY","ripple","cssText","overflow","observeAndAnimate","threshold","rootMargin","animationClass","observer","IntersectionObserver","entries","entry","isIntersecting","unobserve","observe","disconnectObservers","disconnect","queueAnimation","animationFunction","fn","processQueue","Promise","resolve","clearQueue","prefersReducedMotion","matchMedia","matches","respectfulAnimate","fallbackFunction","addKeyboardNavigation","loop","focusableElements","firstElement","lastElement","shiftKey","activeElement","preventDefault","focus","announceToScreenReader","ariaLive","updateDocumentLanguage","documentElement","includes","storageService","StorageService","maxComparisons","selectedCalculations","getAllCalculations","isSelected","formattedDate","_formatDate","getCalculation","trim","update","updates","calculation","loanUpdates","deselectCalculation","selectCalculation","indexOf","clearSelection","getSelectedCalculations","compareCalculations","selected","metrics","_generateComparisonMetrics","differences","_calculateDifferences","schedule","totalLoanAmount","term","paymentAmount","numberOfPayments","baseline","current","diff","paymentDifference","interestDifference","totalPaymentDifference","termDifference","toLocaleDateString","hour","minute","organizeCalculations","calculationIds","category","currentLanguage","defaultLanguage","listeners","loadLanguage","savedLanguage","saveLanguage","getLanguage","getLocale","setLanguage","notifyListeners","languageChangeEvent","CustomEvent","detail","dispatchEvent","translate","getAllTranslations","addListener","listener","removeListener","isNumber","isNaN","isFinite","isPositiveNumber","isInRange","isValidInterestRate","isValidInflationRate","isValidLoanTerm","isInteger"],"sourceRoot":""}