"use strict";(self.webpackChunkloan_calculator=self.webpackChunkloan_calculator||[]).push([[205],{582:function(t,e,a){a.r(e);var n=a(364);e.default=class{constructor(t={}){this.container=t.container||document.getElementById("amortization-table"),this.formatters={currency:n.vv,percentage:n.Ee,number:n.ZV,date:n.Yq,...t.formatters},this.pageSize=t.pageSize||12,this.currentPage=1,this.sortColumn="number",this.sortDirection="asc",this.filters={},this.currentData=[],this.init()}init(){this.container&&this.createFilterControls()}createFilterControls(){const t=document.createElement("div");t.className="filter-controls",t.innerHTML='\n      <div class="filter-row">\n        <div class="filter-group">\n          <label for="year-filter">Filter by Year:</label>\n          <select id="year-filter">\n            <option value="">All Years</option>\n          </select>\n        </div>\n        <div class="filter-group">\n          <label for="payment-range">Payment Range:</label>\n          <input type="number" id="min-payment" placeholder="Min" min="0" step="100">\n          <span>to</span>\n          <input type="number" id="max-payment" placeholder="Max" min="0" step="100">\n        </div>\n        <button id="apply-filters" class="btn-filter">Apply Filters</button>\n        <button id="reset-filters" class="btn-filter">Reset</button>\n      </div>\n    ';const e=t.querySelector("#apply-filters"),a=t.querySelector("#reset-filters");e&&e.addEventListener("click",()=>this.applyFilters()),a&&a.addEventListener("click",()=>this.resetFilters()),this.filterControls=t}applyFilters(){if(!this.filterControls)return;const t=this.filterControls.querySelector("#year-filter").value,e=parseFloat(this.filterControls.querySelector("#min-payment").value)||0,a=parseFloat(this.filterControls.querySelector("#max-payment").value)||1/0;this.filters={},t&&(this.filters.year=parseInt(t)),(e>0||a<1/0)&&(this.filters.paymentRange={min:e,max:a}),this.currentData.length>0&&this.render({payments:this.currentData})}resetFilters(){this.filterControls&&(this.filterControls.querySelector("#year-filter").value="",this.filterControls.querySelector("#min-payment").value="",this.filterControls.querySelector("#max-payment").value="",this.filters={},this.currentData.length>0&&this.render({payments:this.currentData}))}updateYearFilterOptions(t){if(!this.filterControls)return;const e=this.filterControls.querySelector("#year-filter");if(!e)return;for(;e.options.length>1;)e.remove(1);[...new Set(t.map(t=>t.date.getFullYear()))].sort().forEach(t=>{const a=document.createElement("option");a.value=t,a.textContent=t,e.appendChild(a)})}render(t){if(!this.container||!t)return;this.currentData=t.payments||[],this.container.innerHTML="",this.container.appendChild(this.filterControls),this.updateYearFilterOptions(this.currentData);const e=document.createElement("div");e.className="table-container";const a=document.createElement("table");a.className="table table-responsive";const n=this.createTableHeader();a.appendChild(n);const r=this.filterData(this.currentData,this.filters),i=this.sortData(r,this.sortColumn,this.sortDirection),s=(this.currentPage-1)*this.pageSize,l=s+this.pageSize,c=i.slice(s,l),o=this.createTableBody(c);a.appendChild(o),e.appendChild(a),this.container.appendChild(e),this.createPagination(i.length),this.highlightKeyInformation()}createTableHeader(){const t=document.createElement("thead"),e=document.createElement("tr");return[{id:"number",label:"#",sortable:!0},{id:"date",label:"Date",sortable:!0},{id:"amount",label:"Payment",sortable:!0},{id:"principal",label:"Principal",sortable:!0},{id:"interest",label:"Interest",sortable:!0},{id:"balance",label:"Remaining Balance",sortable:!0}].forEach(t=>{const a=document.createElement("th");a.textContent=t.label,t.sortable&&(a.className="sortable",t.id===this.sortColumn&&a.classList.add("asc"===this.sortDirection?"sorted-asc":"sorted-desc"),a.addEventListener("click",()=>{this.sortColumn===t.id?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=t.id,this.sortDirection="asc"),this.render({payments:this.currentData})})),e.appendChild(a)}),t.appendChild(e),t}createTableBody(t){const e=document.createElement("tbody");if(!t||0===t.length){const t=document.createElement("tr"),a=document.createElement("td");return a.colSpan=6,a.textContent="No payment data available",a.className="empty-table-message",t.appendChild(a),e.appendChild(t),e}return t.forEach(t=>{const a=document.createElement("tr");[{value:t.number},{value:this.formatters.date(t.date)},{value:this.formatters.currency(t.amount),raw:t.amount},{value:this.formatters.currency(t.principal),raw:t.principal},{value:this.formatters.currency(t.interest),raw:t.interest},{value:this.formatters.currency(t.balance),raw:t.balance}].forEach((t,e)=>{const n=document.createElement("td");n.textContent=t.value,void 0!==t.raw&&n.setAttribute("data-value",t.raw);n.classList.add(`col-${["number","date","amount","principal","interest","balance"][e]}`),a.appendChild(n)}),a.setAttribute("data-payment-number",t.number),a.setAttribute("data-payment-year",t.date.getFullYear()),a.setAttribute("data-payment-month",t.date.getMonth()+1),e.appendChild(a)}),e}createPagination(t){if(!this.container)return;const e=Math.ceil(t/this.pageSize);if(e<=1)return;const a=document.createElement("div");a.className="pagination";const n=document.createElement("div");n.className="pagination-item",n.textContent="\xab",n.addEventListener("click",()=>{this.currentPage>1&&(this.currentPage--,this.render({payments:this.currentData}))}),a.appendChild(n);let r=Math.max(1,this.currentPage-Math.floor(2.5));const i=Math.min(e,r+5-1);if(i-r+1<5&&(r=Math.max(1,i-5+1)),r>1){const t=document.createElement("div");if(t.className="pagination-item",t.textContent="1",t.addEventListener("click",()=>{this.currentPage=1,this.render({payments:this.currentData})}),a.appendChild(t),r>2){const t=document.createElement("div");t.className="pagination-ellipsis",t.textContent="...",a.appendChild(t)}}for(let l=r;l<=i;l++){const t=document.createElement("div");t.className="pagination-item",l===this.currentPage&&t.classList.add("active"),t.textContent=l,t.addEventListener("click",()=>{this.currentPage=l,this.render({payments:this.currentData})}),a.appendChild(t)}if(i<e){if(i<e-1){const t=document.createElement("div");t.className="pagination-ellipsis",t.textContent="...",a.appendChild(t)}const t=document.createElement("div");t.className="pagination-item",t.textContent=e,t.addEventListener("click",()=>{this.currentPage=e,this.render({payments:this.currentData})}),a.appendChild(t)}const s=document.createElement("div");s.className="pagination-item",s.textContent="\xbb",s.addEventListener("click",()=>{this.currentPage<e&&(this.currentPage++,this.render({payments:this.currentData}))}),a.appendChild(s),this.container.appendChild(a)}sortData(t,e,a){if(!t||!Array.isArray(t)||0===t.length)return[];const n=[...t];return n.sort((t,n)=>{let r,i;switch(e){case"date":r=t.date.getTime(),i=n.date.getTime();break;case"number":case"amount":case"principal":case"interest":case"balance":r=t[e],i=n[e];break;default:r=t.number,i=n.number}return r<i?"asc"===a?-1:1:r>i?"asc"===a?1:-1:0}),n}filterData(t,e){return t&&Array.isArray(t)&&0!==t.length?e&&0!==Object.keys(e).length?t.filter(t=>{if(e.year&&t.date.getFullYear()!==e.year)return!1;if(e.paymentRange){const{min:a,max:n}=e.paymentRange;if(t.amount<a||t.amount>n)return!1}return!0}):t:[]}highlightKeyInformation(){if(!this.container)return;const t=this.container.querySelectorAll("tbody tr");t.forEach(t=>{const e=t.querySelector(".col-principal"),a=t.querySelector(".col-interest");if(e&&a){const n=parseFloat(e.getAttribute("data-value")||0),r=parseFloat(a.getAttribute("data-value")||0);n>2*r&&(t.classList.add("highlight-principal"),e.setAttribute("title","Significant principal reduction")),r>n&&(t.classList.add("highlight-interest"),a.setAttribute("title","Interest exceeds principal"))}}),t.forEach(t=>{const e=t.querySelector(".col-number");if(e){parseInt(e.textContent)%12===0&&(t.classList.add("highlight-milestone"),t.setAttribute("title","Annual milestone payment"))}})}updateTable(t){this.currentPage=1,this.filters={},this.render(t)}clear(){this.container&&(this.container.innerHTML=""),this.currentPage=1,this.currentData=[]}}}}]);
//# sourceMappingURL=amortization-table.2fc710a0ebf3633c1c21.chunk.js.map