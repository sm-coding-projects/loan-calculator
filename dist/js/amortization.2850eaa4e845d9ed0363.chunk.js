"use strict";(self.webpackChunkloan_calculator=self.webpackChunkloan_calculator||[]).push([[934],{582:function(t,e,n){n.r(e);var a=n(364),r=n(799);e.default=class{constructor(t={}){this.container=t.container||document.getElementById("amortization-table"),this.formatters={currency:a.vv,percentage:a.Ee,number:a.ZV,date:a.Yq,...t.formatters},this.pageSize=t.pageSize||12,this.currentPage=1,this.sortColumn="number",this.sortDirection="asc",this.filters={},this.currentData=[],this.init()}init(){this.container&&this.createFilterControls()}createFilterControls(){const t=document.createElement("div");t.className="filter-controls",t.innerHTML='\n      <div class="filter-row">\n        <div class="filter-group">\n          <label for="year-filter">Filter by Year:</label>\n          <select id="year-filter">\n            <option value="">All Years</option>\n          </select>\n        </div>\n        <div class="filter-group">\n          <label for="payment-range">Payment Range:</label>\n          <input type="number" id="min-payment" placeholder="Min" min="0" step="100">\n          <span>to</span>\n          <input type="number" id="max-payment" placeholder="Max" min="0" step="100">\n        </div>\n        <button id="apply-filters" class="btn-filter">Apply Filters</button>\n        <button id="reset-filters" class="btn-filter">Reset</button>\n      </div>\n    ';const e=t.querySelector("#apply-filters"),n=t.querySelector("#reset-filters");e&&e.addEventListener("click",()=>this.applyFilters()),n&&n.addEventListener("click",()=>this.resetFilters()),this.filterControls=t}applyFilters(){if(!this.filterControls)return;const t=this.filterControls.querySelector("#year-filter").value,e=parseFloat(this.filterControls.querySelector("#min-payment").value)||0,n=parseFloat(this.filterControls.querySelector("#max-payment").value)||1/0;this.filters={},t&&(this.filters.year=parseInt(t)),(e>0||n<1/0)&&(this.filters.paymentRange={min:e,max:n}),this.currentData.length>0&&this.render({payments:this.currentData})}resetFilters(){this.filterControls&&(this.filterControls.querySelector("#year-filter").value="",this.filterControls.querySelector("#min-payment").value="",this.filterControls.querySelector("#max-payment").value="",this.filters={},this.currentData.length>0&&this.render({payments:this.currentData}))}updateYearFilterOptions(t){if(!this.filterControls)return;const e=this.filterControls.querySelector("#year-filter");if(!e)return;for(;e.options.length>1;)e.remove(1);[...new Set(t.map(t=>t.date.getFullYear()))].sort().forEach(t=>{const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)})}showLoadingSkeleton(){this.container&&(this.container.innerHTML=`\n      <div class="table-container">\n        <table class="skeleton-table">\n          <thead>\n            <tr>\n              <th>#</th>\n              <th>Date</th>\n              <th>Payment</th>\n              <th>Principal</th>\n              <th>Interest</th>\n              <th>Remaining Balance</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${Array.from({length:8},(t,e)=>'\n              <tr class="skeleton-row">\n                <td><div class="skeleton-cell short"></div></td>\n                <td><div class="skeleton-cell medium"></div></td>\n                <td><div class="skeleton-cell long"></div></td>\n                <td><div class="skeleton-cell long"></div></td>\n                <td><div class="skeleton-cell long"></div></td>\n                <td><div class="skeleton-cell long"></div></td>\n              </tr>\n            ').join("")}\n          </tbody>\n        </table>\n      </div>\n    `)}render(t){if(!this.container)return;if(!t||!t.payments||0===t.payments.length)return void this.showLoadingSkeleton();this.currentData=t.payments||[],this.container.innerHTML="",this.container.appendChild(this.filterControls),this.updateYearFilterOptions(this.currentData);const e=document.createElement("div");e.className="table-container";const n=document.createElement("table");n.className="table table-responsive";const a=this.createTableHeader();n.appendChild(a);const r=this.filterData(this.currentData,this.filters),i=this.sortData(r,this.sortColumn,this.sortDirection),s=(this.currentPage-1)*this.pageSize,l=s+this.pageSize,o=i.slice(s,l),c=this.createTableBody(o);n.appendChild(c),e.appendChild(n),this.container.appendChild(e),this.createPagination(i.length),this.highlightKeyInformation(),this._animateTableReveal(n,o.length)}createTableHeader(){const t=document.createElement("thead"),e=document.createElement("tr");return[{id:"number",label:"#",sortable:!0},{id:"date",label:"Date",sortable:!0},{id:"amount",label:"Payment",sortable:!0},{id:"principal",label:"Principal",sortable:!0},{id:"interest",label:"Interest",sortable:!0},{id:"balance",label:"Remaining Balance",sortable:!0}].forEach(t=>{const n=document.createElement("th");n.textContent=t.label,t.sortable&&(n.className="sortable",t.id===this.sortColumn&&n.classList.add("asc"===this.sortDirection?"sorted-asc":"sorted-desc"),n.addEventListener("click",()=>{this.sortColumn===t.id?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=t.id,this.sortDirection="asc"),this.render({payments:this.currentData})})),e.appendChild(n)}),t.appendChild(e),t}createTableBody(t){const e=document.createElement("tbody");if(!t||0===t.length){const t=document.createElement("tr"),n=document.createElement("td");return n.colSpan=6,n.textContent="No payment data available",n.className="empty-table-message",t.appendChild(n),e.appendChild(t),e}return t.forEach(t=>{const n=document.createElement("tr");[{value:t.number},{value:this.formatters.date(t.date)},{value:this.formatters.currency(t.amount),raw:t.amount},{value:this.formatters.currency(t.principal),raw:t.principal},{value:this.formatters.currency(t.interest),raw:t.interest},{value:this.formatters.currency(t.balance),raw:t.balance}].forEach((t,e)=>{const a=document.createElement("td");a.textContent=t.value,void 0!==t.raw&&a.setAttribute("data-value",t.raw);a.classList.add(`col-${["number","date","amount","principal","interest","balance"][e]}`),n.appendChild(a)}),n.setAttribute("data-payment-number",t.number),n.setAttribute("data-payment-year",t.date.getFullYear()),n.setAttribute("data-payment-month",t.date.getMonth()+1),e.appendChild(n)}),e}createPagination(t){if(!this.container)return;const e=Math.ceil(t/this.pageSize);if(e<=1)return;const n=document.createElement("div");n.className="pagination";const a=document.createElement("div");a.className="pagination-item",a.textContent="\xab",a.addEventListener("click",()=>{this.currentPage>1&&(this.currentPage--,this.render({payments:this.currentData}))}),n.appendChild(a);let r=Math.max(1,this.currentPage-Math.floor(2.5));const i=Math.min(e,r+5-1);if(i-r+1<5&&(r=Math.max(1,i-5+1)),r>1){const t=document.createElement("div");if(t.className="pagination-item",t.textContent="1",t.addEventListener("click",()=>{this.currentPage=1,this.render({payments:this.currentData})}),n.appendChild(t),r>2){const t=document.createElement("div");t.className="pagination-ellipsis",t.textContent="...",n.appendChild(t)}}for(let l=r;l<=i;l++){const t=document.createElement("div");t.className="pagination-item",l===this.currentPage&&t.classList.add("active"),t.textContent=l,t.addEventListener("click",()=>{this.currentPage=l,this.render({payments:this.currentData})}),n.appendChild(t)}if(i<e){if(i<e-1){const t=document.createElement("div");t.className="pagination-ellipsis",t.textContent="...",n.appendChild(t)}const t=document.createElement("div");t.className="pagination-item",t.textContent=e,t.addEventListener("click",()=>{this.currentPage=e,this.render({payments:this.currentData})}),n.appendChild(t)}const s=document.createElement("div");s.className="pagination-item",s.textContent="\xbb",s.addEventListener("click",()=>{this.currentPage<e&&(this.currentPage++,this.render({payments:this.currentData}))}),n.appendChild(s),this.container.appendChild(n)}sortData(t,e,n){if(!t||!Array.isArray(t)||0===t.length)return[];const a=[...t];return a.sort((t,a)=>{let r,i;switch(e){case"date":r=t.date.getTime(),i=a.date.getTime();break;case"number":case"amount":case"principal":case"interest":case"balance":r=t[e],i=a[e];break;default:r=t.number,i=a.number}return r<i?"asc"===n?-1:1:r>i?"asc"===n?1:-1:0}),a}filterData(t,e){return t&&Array.isArray(t)&&0!==t.length?e&&0!==Object.keys(e).length?t.filter(t=>{if(e.year&&t.date.getFullYear()!==e.year)return!1;if(e.paymentRange){const{min:n,max:a}=e.paymentRange;if(t.amount<n||t.amount>a)return!1}return!0}):t:[]}highlightKeyInformation(){if(!this.container)return;const t=this.container.querySelectorAll("tbody tr");t.forEach(t=>{const e=t.querySelector(".col-principal"),n=t.querySelector(".col-interest");if(e&&n){const a=parseFloat(e.getAttribute("data-value")||0),r=parseFloat(n.getAttribute("data-value")||0);a>2*r&&(t.classList.add("highlight-principal"),e.setAttribute("title","Significant principal reduction")),r>a&&(t.classList.add("highlight-interest"),n.setAttribute("title","Interest exceeds principal"))}}),t.forEach(t=>{const e=t.querySelector(".col-number");if(e){parseInt(e.textContent)%12===0&&(t.classList.add("highlight-milestone"),t.setAttribute("title","Annual milestone payment"))}})}updateTable(t){this.currentPage=1,this.filters={},this.render(t)}showError(t="Failed to load amortization data"){this.container&&(this.container.innerHTML=`\n      <div class="component-error">\n        <div class="error-icon">\u26a0\ufe0f</div>\n        <div class="error-text">${t}</div>\n        <button class="retry-button" onclick="location.reload()">Retry</button>\n      </div>\n    `)}clear(){this.container&&(this.container.innerHTML=""),this.currentPage=1,this.currentData=[]}_animateTableReveal(t,e){r.A.respectfulAnimate(()=>{const n=t.closest(".table-container");n&&(n.style.opacity="0",n.style.transform="translateY(20px)",n.style.transition="all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",setTimeout(()=>{n.style.opacity="1",n.style.transform="translateY(0)"},100)),setTimeout(()=>{r.A.animateTableRows(t,{delay:200,staggerDelay:50})},300),setTimeout(()=>{this._addTableInteractions(t)},300+50*e)},()=>{const e=t.closest(".table-container");e&&(e.style.opacity="1",e.style.transform="none");t.querySelectorAll("tbody tr").forEach(t=>{t.style.opacity="1",t.style.transform="none"})})}_addTableInteractions(t){t.querySelectorAll("tbody tr").forEach(t=>{t.addEventListener("mouseenter",()=>{r.A.prefersReducedMotion()||(t.style.transform="translateX(4px)",t.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",t.style.transition="all 0.2s cubic-bezier(0.4, 0, 0.2, 1)")}),t.addEventListener("mouseleave",()=>{r.A.prefersReducedMotion()||(t.style.transform="",t.style.boxShadow="")})});t.querySelectorAll("th[data-sort]").forEach(t=>{t.addEventListener("click",e=>{r.A.prefersReducedMotion()||r.A.createRippleEffect(t,e)})});this.container.querySelectorAll(".pagination button").forEach(t=>{t.addEventListener("click",e=>{r.A.prefersReducedMotion()||r.A.createRippleEffect(t,e)})})}}}}]);
//# sourceMappingURL=amortization.2850eaa4e845d9ed0363.chunk.js.map